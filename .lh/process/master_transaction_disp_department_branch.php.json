{
    "sourceFile": "process/master_transaction_disp_department_branch.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 83,
            "patches": [
                {
                    "date": 1632905661845,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1632905669691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,13 +50,14 @@\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n         inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' \");\r\n     } else {\r\n-        $query_data = mysqli_query($conn, \"SELECT tdd.*, asset.noasset, asset.name as assetname, lbranch.branch, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_department tdd\r\n-        inner join location_branch lbranch on lbranch.idbranch = tdd.idbranch\r\n-        inner join location_room lfromroom on lfromroom.id = tdd.idfromroom\r\n-        inner join location_room ltoroom on ltoroom.id = tdd.idtoroom \r\n-        inner join asset on asset.id = tdd.idasset where tdd.idsister = '$myses' and (\r\n+        $query_data = mysqli_query($conn, \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+        inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n+        inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n+        inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n+        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n+        inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' and (\r\n          tdd.notransaction LIKE '%$search%' \r\n         OR lbranch.branch LIKE '%$search%'\r\n         OR asset.noasset LIKE '%$search%'\r\n         OR asset.name LIKE '%$search%'\r\n"
                },
                {
                    "date": 1632905746437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,21 +57,28 @@\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n         inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' and (\r\n          tdd.notransaction LIKE '%$search%' \r\n-        OR lbranch.branch LIKE '%$search%'\r\n+        OR lbranchfrom.branch LIKE '%$search%'\r\n+        OR lbranchto.branch LIKE '%$search%'\r\n+        OR lfromroom.room LIKE '%$search%'\r\n+        OR ltoroom.room LIKE '%$search%' \r\n         OR asset.noasset LIKE '%$search%'\r\n         OR asset.name LIKE '%$search%'\r\n         OR tdd.remark LIKE '%$search%'\r\n         OR tdd.status_approval LIKE '%$search%' )  ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"SELECT tdd.*, asset.noasset, asset.name as assetname, lbranch.branch, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_department tdd\r\n-        inner join location_branch lbranch on lbranch.idbranch = tdd.idbranch\r\n-        inner join location_room lfromroom on lfromroom.id = tdd.idfromroom\r\n-        inner join location_room ltoroom on ltoroom.id = tdd.idtoroom \r\n-        inner join asset on asset.id = tdd.idasset where tdd.idsister = '$myses' and (\r\n+        $total_filtered = mysqli_query($conn, \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+        inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n+        inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n+        inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n+        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n+        inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' and (\r\n          tdd.notransaction LIKE '%$search%' \r\n-        OR lbranch.branch LIKE '%$search%'\r\n+        OR lbranchfrom.branch LIKE '%$search%'\r\n+        OR lbranchto.branch LIKE '%$search%'\r\n+        OR lfromroom.room LIKE '%$search%'\r\n+        OR ltoroom.room LIKE '%$search%' \r\n         OR asset.noasset LIKE '%$search%'\r\n         OR asset.name LIKE '%$search%'\r\n         OR tdd.remark LIKE '%$search%'\r\n         OR tdd.status_approval LIKE '%$search%' )\");\r\n"
                },
                {
                    "date": 1632905762815,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,10 @@\n \r\n     $where_like = [\r\n         'assetname',\r\n         'noasset',\r\n-        'branch',\r\n+        'branchto',\r\n+        'branchto',\r\n         'roomfroom',\r\n         'toroom',\r\n         'status_approval',\r\n         'remark'\r\n"
                },
                {
                    "date": 1632905767848,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n     $where_like = [\r\n         'assetname',\r\n         'noasset',\r\n         'branchto',\r\n-        'branchto',\r\n+        'branchfrom',\r\n         'roomfroom',\r\n         'toroom',\r\n         'status_approval',\r\n         'remark'\r\n"
                },
                {
                    "date": 1632905784653,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -107,9 +107,9 @@\n                 // \"<a href= '#myModalDisplay'  data-toggle='modal'><span class='pointer-element badge badge-success' id ='\".$row['id'].\"' onclick = 'openmodaldisplay(this)'  data-id='\".$row['id'].\"'><i class='icon-plus3'></i></span></a>\",\r\n                 \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n                 \"<label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label>\",\r\n-                \"<label id ='branch\".$row['id'].\"'>\".$row['branch'].\"</label>\",\r\n+                \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n                 \"<label id ='noasset\".$row['id'].\"'>\".$row['noasset'].\"</label>\",\r\n                 \"<label id ='assetname\".$row['id'].\"'>\".$row['assetname'].\"</label>\",\r\n                 \"<label id ='roomfrom\".$row['id'].\"'>\".$row['myfromroom'].\"</label>\",\r\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n"
                },
                {
                    "date": 1632905790728,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,8 +108,9 @@\n                 \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n                 \"<label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n+                \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchto'].\"</label>\",\r\n                 \"<label id ='noasset\".$row['id'].\"'>\".$row['noasset'].\"</label>\",\r\n                 \"<label id ='assetname\".$row['id'].\"'>\".$row['assetname'].\"</label>\",\r\n                 \"<label id ='roomfrom\".$row['id'].\"'>\".$row['myfromroom'].\"</label>\",\r\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n"
                },
                {
                    "date": 1632906278201,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n         'assetname',\r\n         'noasset',\r\n         'branchto',\r\n         'branchfrom',\r\n-        'roomfroom',\r\n+        'roomfrom',\r\n         'toroom',\r\n         'status_approval',\r\n         'remark'\r\n         \r\n@@ -57,33 +57,33 @@\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n         inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' and (\r\n-         tdd.notransaction LIKE '%$search%' \r\n+         tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n         OR lbranchto.branch LIKE '%$search%'\r\n         OR lfromroom.room LIKE '%$search%'\r\n         OR ltoroom.room LIKE '%$search%' \r\n         OR asset.noasset LIKE '%$search%'\r\n         OR asset.name LIKE '%$search%'\r\n-        OR tdd.remark LIKE '%$search%'\r\n-        OR tdd.status_approval LIKE '%$search%' )  ORDER BY $order $dir LIMIT $start, $length\");\r\n+        OR tdod.remark LIKE '%$search%'\r\n+        OR tdod.status_approval LIKE '%$search%' )  ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n         $total_filtered = mysqli_query($conn, \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n         inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' and (\r\n-         tdd.notransaction LIKE '%$search%' \r\n+         tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n         OR lbranchto.branch LIKE '%$search%'\r\n         OR lfromroom.room LIKE '%$search%'\r\n         OR ltoroom.room LIKE '%$search%' \r\n         OR asset.noasset LIKE '%$search%'\r\n         OR asset.name LIKE '%$search%'\r\n-        OR tdd.remark LIKE '%$search%'\r\n-        OR tdd.status_approval LIKE '%$search%' )\");\r\n+        OR tdod.remark LIKE '%$search%'\r\n+        OR tdod.status_approval LIKE '%$search%' )\");\r\n     }\r\n     \r\n     $response['data'] = [];\r\n     \r\n"
                },
                {
                    "date": 1632906944623,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -367,8 +367,9 @@\n     $idsister = $myses;\r\n     $mygroup = $_POST['mygroup'];\r\n     $myasset = $_POST['myasset'];\r\n     $mybranch = $_POST['mybranch'];\r\n+    $mybranch = $_POST['mybranch'];\r\n     $mydepartment = $_POST['mydepartment'];\r\n     $myfromroom = $_POST['myfromroom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n"
                },
                {
                    "date": 1632906956234,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -366,12 +366,12 @@\n \r\n     $idsister = $myses;\r\n     $mygroup = $_POST['mygroup'];\r\n     $myasset = $_POST['myasset'];\r\n+    $mybranchfrom = $_POST['mybranch'];\r\n     $mybranch = $_POST['mybranch'];\r\n-    $mybranch = $_POST['mybranch'];\r\n     $mydepartment = $_POST['mydepartment'];\r\n-    $myfromroom = $_POST['myfromroom'];\r\n+    $myfromroom = $_POST['mybranchto'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     date_default_timezone_set(\"Asia/Bangkok\");\r\n     $mydate = date(\"Y-m-d\");\r\n"
                },
                {
                    "date": 1632906964842,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -369,9 +369,9 @@\n     $myasset = $_POST['myasset'];\r\n     $mybranchfrom = $_POST['mybranch'];\r\n     $mybranch = $_POST['mybranch'];\r\n     $mydepartment = $_POST['mydepartment'];\r\n-    $myfromroom = $_POST['mybranchto'];\r\n+    $myroomfrom = $_POST['mybranchfrom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     date_default_timezone_set(\"Asia/Bangkok\");\r\n     $mydate = date(\"Y-m-d\");\r\n"
                },
                {
                    "date": 1632906973185,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -369,9 +369,9 @@\n     $myasset = $_POST['myasset'];\r\n     $mybranchfrom = $_POST['mybranch'];\r\n     $mybranch = $_POST['mybranch'];\r\n     $mydepartment = $_POST['mydepartment'];\r\n-    $myroomfrom = $_POST['mybranchfrom'];\r\n+    $myfromroom = $_POST['myfromroom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     date_default_timezone_set(\"Asia/Bangkok\");\r\n     $mydate = date(\"Y-m-d\");\r\n"
                },
                {
                    "date": 1632906978643,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -367,9 +367,9 @@\n     $idsister = $myses;\r\n     $mygroup = $_POST['mygroup'];\r\n     $myasset = $_POST['myasset'];\r\n     $mybranchfrom = $_POST['mybranch'];\r\n-    $mybranch = $_POST['mybranch'];\r\n+    $mybranch = $_POST['mybranchto'];\r\n     $mydepartment = $_POST['mydepartment'];\r\n     $myfromroom = $_POST['myfromroom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n"
                },
                {
                    "date": 1632906988976,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -366,10 +366,10 @@\n \r\n     $idsister = $myses;\r\n     $mygroup = $_POST['mygroup'];\r\n     $myasset = $_POST['myasset'];\r\n-    $mybranchfrom = $_POST['mybranch'];\r\n-    $mybranch = $_POST['mybranchto'];\r\n+    $mybranchfrom = $_POST['mybranchfrom'];\r\n+    $mybranchto = $_POST['mybranchto'];\r\n     $mydepartment = $_POST['mydepartment'];\r\n     $myfromroom = $_POST['myfromroom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n"
                },
                {
                    "date": 1632906994033,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -368,9 +368,8 @@\n     $mygroup = $_POST['mygroup'];\r\n     $myasset = $_POST['myasset'];\r\n     $mybranchfrom = $_POST['mybranchfrom'];\r\n     $mybranchto = $_POST['mybranchto'];\r\n-    $mydepartment = $_POST['mydepartment'];\r\n     $myfromroom = $_POST['myfromroom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     date_default_timezone_set(\"Asia/Bangkok\");\r\n"
                },
                {
                    "date": 1632907330869,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -373,9 +373,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     date_default_timezone_set(\"Asia/Bangkok\");\r\n     $mydate = date(\"Y-m-d\");\r\n-    $sql = \"INSERT INTO `transaction_displacement_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranch', '$mygroup', '$myasset', '$mydepartment', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n+    $sql = \"INSERT INTO `transaction_displacement_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranchfrom', '$mybranchto', '$mygroup', '$myasset', '$mydepartment', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1632907339806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -373,9 +373,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     date_default_timezone_set(\"Asia/Bangkok\");\r\n     $mydate = date(\"Y-m-d\");\r\n-    $sql = \"INSERT INTO `transaction_displacement_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranchfrom', '$mybranchto', '$mygroup', '$myasset', '$mydepartment', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n+    $sql = \"INSERT INTO `transaction_displacement_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranchfrom', '$mybranchto', '$mygroup', '$myasset', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1632907359238,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -373,9 +373,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     date_default_timezone_set(\"Asia/Bangkok\");\r\n     $mydate = date(\"Y-m-d\");\r\n-    $sql = \"INSERT INTO `transaction_displacement_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranchfrom', '$mybranchto', '$mygroup', '$myasset', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n+    $sql = \"INSERT INTO `transaction_displacemen_othert_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranchfrom', '$mybranchto', '$mygroup', '$myasset', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1633414693802,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,10 +109,8 @@\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n                 \"<label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchto'].\"</label>\",\r\n-                \"<label id ='noasset\".$row['id'].\"'>\".$row['noasset'].\"</label>\",\r\n-                \"<label id ='assetname\".$row['id'].\"'>\".$row['assetname'].\"</label>\",\r\n                 \"<label id ='roomfrom\".$row['id'].\"'>\".$row['myfromroom'].\"</label>\",\r\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n                 \"<label id ='remark\".$row['id'].\"'>\".$row['remark'].\"</label>\",\r\n                \r\n@@ -373,9 +371,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     date_default_timezone_set(\"Asia/Bangkok\");\r\n     $mydate = date(\"Y-m-d\");\r\n-    $sql = \"INSERT INTO `transaction_displacemen_othert_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranchfrom', '$mybranchto', '$mygroup', '$myasset', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n+    $sql = \"INSERT INTO `transaction_displacement_other_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranchfrom', '$mybranchto', '$mygroup', '$myasset', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1633414763394,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,10 +6,8 @@\n if($tipe == \"load\")\r\n {\r\n \r\n     $where_like = [\r\n-        'assetname',\r\n-        'noasset',\r\n         'branchto',\r\n         'branchfrom',\r\n         'roomfrom',\r\n         'toroom',\r\n@@ -26,62 +24,53 @@\n     $search   = $response['search']['value'];\r\n     \r\n     $total_data = mysqli_query($conn, \r\n     \r\n-    \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+    \"SELECT tdod.*,lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n     inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n     inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n     inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n-    inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n-    inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses'\r\n+    inner join location_room ltoroom on ltoroom.id = tdod.idtoroom  where tdod.idsister = '$myses'\r\n     \"\r\n \r\n );\r\n     \r\n     if(empty($search)) {\r\n-        $query_data = mysqli_query($conn, \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+        $query_data = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n-        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n-        inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' ORDER BY $order $dir LIMIT $start, $length\");\r\n+        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom  where tdod.idsister = '$myses' ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+        $total_filtered = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n-        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n-        inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' \");\r\n+        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom  where tdod.idsister = '$myses' \");\r\n     } else {\r\n-        $query_data = mysqli_query($conn, \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+        $query_data = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n-        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n-        inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' and (\r\n+        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom  where tdod.idsister = '$myses' and (\r\n          tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n         OR lbranchto.branch LIKE '%$search%'\r\n         OR lfromroom.room LIKE '%$search%'\r\n         OR ltoroom.room LIKE '%$search%' \r\n-        OR asset.noasset LIKE '%$search%'\r\n-        OR asset.name LIKE '%$search%'\r\n         OR tdod.remark LIKE '%$search%'\r\n         OR tdod.status_approval LIKE '%$search%' )  ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+        $total_filtered = mysqli_query($conn, \"SELECT tdod.*,  lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n-        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n-        inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' and (\r\n+        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom  where tdod.idsister = '$myses' and (\r\n          tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n         OR lbranchto.branch LIKE '%$search%'\r\n         OR lfromroom.room LIKE '%$search%'\r\n         OR ltoroom.room LIKE '%$search%' \r\n-        OR asset.noasset LIKE '%$search%'\r\n-        OR asset.name LIKE '%$search%'\r\n         OR tdod.remark LIKE '%$search%'\r\n         OR tdod.status_approval LIKE '%$search%' )\");\r\n     }\r\n     \r\n"
                },
                {
                    "date": 1633415110297,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,9 +95,9 @@\n             $response['data'][] = [\r\n                 // \"<a href= '#myModalDisplay'  data-toggle='modal'><span class='pointer-element badge badge-success' id ='\".$row['id'].\"' onclick = 'openmodaldisplay(this)'  data-id='\".$row['id'].\"'><i class='icon-plus3'></i></span></a>\",\r\n                 \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n-                \"<label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label>\",\r\n+                \"<a href = '#myModalDetailTransaction' id = '\".$row['id'].\"' onclick = openmodaldetailtransaction(this) data-toggle='modal'><label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchto'].\"</label>\",\r\n                 \"<label id ='roomfrom\".$row['id'].\"'>\".$row['myfromroom'].\"</label>\",\r\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n"
                },
                {
                    "date": 1633415118942,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,9 +95,9 @@\n             $response['data'][] = [\r\n                 // \"<a href= '#myModalDisplay'  data-toggle='modal'><span class='pointer-element badge badge-success' id ='\".$row['id'].\"' onclick = 'openmodaldisplay(this)'  data-id='\".$row['id'].\"'><i class='icon-plus3'></i></span></a>\",\r\n                 \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n-                \"<a href = '#myModalDetailTransaction' id = '\".$row['id'].\"' onclick = openmodaldetailtransaction(this) data-toggle='modal'><label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label>\",\r\n+                \"<a href = '#myModalDetailTransaction' id = '\".$row['id'].\"' onclick = openmodaldetailtransaction(this) data-toggle='modal'><label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label></a>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchto'].\"</label>\",\r\n                 \"<label id ='roomfrom\".$row['id'].\"'>\".$row['myfromroom'].\"</label>\",\r\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n"
                },
                {
                    "date": 1633415147995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -456,5 +456,102 @@\n         }\r\n     }\r\n     echo $mystring;\r\n }\r\n+else if($tipe == \"getdetailtransaction\")\r\n+{\r\n+    $idtransaction = $_POST['idtransaction'];\r\n+    $sql = \"select tddl.*, asset.name as assetname, asset.noasset  from transaction_displacement_department_log tddl inner join asset on asset.id = tddl.idasset where idtransaksi = '$idtransaction'\";\r\n+    $res = $conn->query($sql);\r\n+    $mystring = \"\";\r\n+    $mycountasset = 0;\r\n+    $mynumber = 1;\r\n+    if($res->num_rows>0)\r\n+    {\r\n+        $mycounter = 1;\r\n+        while($r = mysqli_fetch_array($res))\r\n+        {\r\n+            $mycountasset += 1;\r\n+            if($mycounter == 1)\r\n+            {\r\n+                $mystring .= \"<div class = 'row'><div class = 'col-md-6'><label style = 'display:block;float:left;heigth:100px;font-size:12pt;' ><b>$mynumber. </b> &nbsp </label><label style = 'display:block;float:left' >\".$r['assetname'].\"<br>\".$r['noasset'].\"</label></div>\";\r\n+                $mycounter = 2;\r\n+            }\r\n+            else{\r\n+                $mystring .= \"<div class = 'col-md-6'><label style = 'display:block;float:left;heigth:100px;font-size:12pt;' ><b>$mynumber. </b> &nbsp </label><label style = 'display:block;float:left' >\".$r['assetname'].\"<br>\".$r['noasset'].\"</label></div></div><br>\";\r\n+                $mycounter = 1;\r\n+            }\r\n+            $mynumber ++;\r\n+            \r\n+        }\r\n+        echo $mycountasset.\"||\".$mystring;\r\n+    }\r\n+    else\r\n+    {\r\n+        echo \"\";\r\n+    }\r\n+\r\n+}\r\n+else if($tipe == \"getasset\")\r\n+{\r\n+    $idcategory = $_POST['idcategory'];\r\n+    $sql =  \"select * from asset where idcategory = '$idcategory' and status_transaction = 'placed'\";\r\n+    $res = $conn->query($sql);\r\n+    $mystring = \"\";\r\n+    if($res->num_rows>0)\r\n+    {\r\n+        $mycounter = 1;\r\n+        while($r = mysqli_fetch_array($res))\r\n+        {\r\n+            if($mycounter == 1)\r\n+            {\r\n+                $mystring .= \"<div class = 'row'><div class = 'col-md-6'><input class = 'mycheckbox' type = 'checkbox' value = '\".$r['id'].\"' > \".$r['name'].\"</div>\";\r\n+                $mycounter = 2;\r\n+            }\r\n+            else{\r\n+                $mystring .= \"<div class = 'col-md-6'><input class = 'mycheckbox' type = 'checkbox' value = '\".$r['id'].\"' > \".$r['name'].\"</div></div><br>\";\r\n+                $mycounter = 1;\r\n+            }\r\n+            \r\n+        }\r\n+        echo $mystring;\r\n+    }\r\n+    else\r\n+    {\r\n+        echo \"\";\r\n+    }\r\n+   \r\n+\r\n+}\r\n+else if($tipe == \"getsubgroup\")\r\n+{\r\n+    $idgroup = $_POST['idgroup'];\r\n+    $sql = \"SELECT ks.* from kategori_subgroup ks inner join kategori_asset ka on ka.id = ks.idkategoriaset\r\n+     where ka.id = '$idgroup'\";\r\n+    $res = $conn->query($sql);\r\n+    $mystring = \"\";\r\n+    if($res -> num_rows>0)\r\n+    {\r\n+        while($r = mysqli_fetch_array($res))\r\n+        {\r\n+            $mystring .= \"<option value = '\".$r['id'].\"'> \".$r['subgroup'].\"</option>\";\r\n+        }\r\n+    }\r\n+    echo $mystring;\r\n+}\r\n+else if($tipe == \"getcategory\")\r\n+{\r\n+    $idsubgroup = $_POST['idsubgroup'];\r\n+    $sql = \"SELECT kcs.* from kategori_categorysubgroup kcs \r\n+    where kcs.idsubgroup = '$idsubgroup'\";\r\n+    $res = $conn->query($sql);\r\n+    $mystring = \"\";\r\n+    if($res -> num_rows>0)\r\n+    {\r\n+        while($r = mysqli_fetch_array($res))\r\n+        {\r\n+            $mystring .= \"<option value = '\".$r['id'].\"'> \".$r['category'].\"</option>\";\r\n+        }\r\n+    }\r\n+    echo $mystring;\r\n+}\r\n ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1633415853259,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -459,9 +459,9 @@\n }\r\n else if($tipe == \"getdetailtransaction\")\r\n {\r\n     $idtransaction = $_POST['idtransaction'];\r\n-    $sql = \"select tddl.*, asset.name as assetname, asset.noasset  from transaction_displacement_department_log tddl inner join asset on asset.id = tddl.idasset where idtransaksi = '$idtransaction'\";\r\n+    $sql = \"select tddl.*, asset.name as assetname, asset.noasset  from transaction_displacement_other_department_log tddl inner join asset on asset.id = tddl.idasset where idtransaksi = '$idtransaction'\";\r\n     $res = $conn->query($sql);\r\n     $mystring = \"\";\r\n     $mycountasset = 0;\r\n     $mynumber = 1;\r\n"
                },
                {
                    "date": 1633415867169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -459,9 +459,9 @@\n }\r\n else if($tipe == \"getdetailtransaction\")\r\n {\r\n     $idtransaction = $_POST['idtransaction'];\r\n-    $sql = \"select tddl.*, asset.name as assetname, asset.noasset  from transaction_displacement_other_department_log tddl inner join asset on asset.id = tddl.idasset where idtransaksi = '$idtransaction'\";\r\n+    $sql = \"select tdodl.*, asset.name as assetname, asset.noasset  from transaction_displacement_other_department_log tdodl inner join asset on asset.id = tdodl.idasset where idtransaksi = '$idtransaction'\";\r\n     $res = $conn->query($sql);\r\n     $mystring = \"\";\r\n     $mycountasset = 0;\r\n     $mynumber = 1;\r\n"
                },
                {
                    "date": 1633420234420,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -349,12 +349,12 @@\n \r\n \r\n }\r\n else if($tipe == \"add\"){\r\n-\r\n+    myselect: selected,\r\n     $idsister = $myses;\r\n     $mygroup = $_POST['mygroup'];\r\n-    $myasset = $_POST['myasset'];\r\n+    $myselect = $_POST['myselect'];\r\n     $mybranchfrom = $_POST['mybranchfrom'];\r\n     $mybranchto = $_POST['mybranchto'];\r\n     $myfromroom = $_POST['myfromroom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n"
                },
                {
                    "date": 1633420251877,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -349,12 +349,11 @@\n \r\n \r\n }\r\n else if($tipe == \"add\"){\r\n-    myselect: selected,\r\n     $idsister = $myses;\r\n     $mygroup = $_POST['mygroup'];\r\n-    $myselect = $_POST['myselect'];\r\n+    $myselectedlist = $_POST['myselect'];\r\n     $mybranchfrom = $_POST['mybranchfrom'];\r\n     $mybranchto = $_POST['mybranchto'];\r\n     $myfromroom = $_POST['myfromroom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n"
                },
                {
                    "date": 1633420260298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -361,8 +361,18 @@\n     date_default_timezone_set(\"Asia/Bangkok\");\r\n     $mydate = date(\"Y-m-d\");\r\n     $sql = \"INSERT INTO `transaction_displacement_other_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranchfrom', '$mybranchto', '$mygroup', '$myasset', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n     $res = $conn->query($sql);\r\n+    $last_id = $conn->insert_id;\r\n+\r\n+    for($i = 0 ;  $i < count($myselectedlist) ; $i++)\r\n+    {\r\n+        $sqlupdate  = \"UPDATE asset set status_transaction = 'placed' where id = '\".$myselectedlist[$i].\"'\";\r\n+        $resupdate =  $conn->query($sqlupdate);\r\n+        $sqls = \"INSERT INTO `transaction_displacement_department_log` VALUES (NULL, '$last_id', '\".$myselectedlist[$i].\"')\";\r\n+        $ress = $conn->query($sqls);\r\n+      \r\n+    }\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n     }\r\n"
                },
                {
                    "date": 1633420274955,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -367,9 +367,9 @@\n     for($i = 0 ;  $i < count($myselectedlist) ; $i++)\r\n     {\r\n         $sqlupdate  = \"UPDATE asset set status_transaction = 'placed' where id = '\".$myselectedlist[$i].\"'\";\r\n         $resupdate =  $conn->query($sqlupdate);\r\n-        $sqls = \"INSERT INTO `transaction_displacement_department_log` VALUES (NULL, '$last_id', '\".$myselectedlist[$i].\"')\";\r\n+        $sqls = \"INSERT INTO `transaction_displacement_other_department_log` VALUES (NULL, '$last_id', '\".$myselectedlist[$i].\"')\";\r\n         $ress = $conn->query($sqls);\r\n       \r\n     }\r\n     if(($conn -> affected_rows)>0)\r\n"
                },
                {
                    "date": 1633420351797,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -359,9 +359,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     date_default_timezone_set(\"Asia/Bangkok\");\r\n     $mydate = date(\"Y-m-d\");\r\n-    $sql = \"INSERT INTO `transaction_displacement_other_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranchfrom', '$mybranchto', '$mygroup', '$myasset', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n+    $sql = \"INSERT INTO `transaction_displacement_other_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranchfrom', '$mybranchto', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n     $res = $conn->query($sql);\r\n     $last_id = $conn->insert_id;\r\n \r\n     for($i = 0 ;  $i < count($myselectedlist) ; $i++)\r\n"
                },
                {
                    "date": 1633669322551,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -479,17 +479,10 @@\n         $mycounter = 1;\r\n         while($r = mysqli_fetch_array($res))\r\n         {\r\n             $mycountasset += 1;\r\n-            if($mycounter == 1)\r\n-            {\r\n-                $mystring .= \"<div class = 'row'><div class = 'col-md-6'><label style = 'display:block;float:left;heigth:100px;font-size:12pt;' ><b>$mynumber. </b> &nbsp </label><label style = 'display:block;float:left' >\".$r['assetname'].\"<br>\".$r['noasset'].\"</label></div>\";\r\n-                $mycounter = 2;\r\n-            }\r\n-            else{\r\n-                $mystring .= \"<div class = 'col-md-6'><label style = 'display:block;float:left;heigth:100px;font-size:12pt;' ><b>$mynumber. </b> &nbsp </label><label style = 'display:block;float:left' >\".$r['assetname'].\"<br>\".$r['noasset'].\"</label></div></div><br>\";\r\n-                $mycounter = 1;\r\n-            }\r\n+            $mystring .= \"<div class = 'row' style = 'margin-left:5px;'><label style = 'display:block;float:left;heigth:100px;font-size:12pt;' ><b>$mynumber. </b> &nbsp </label><label style = 'display:block;float:left' >\".$r['assetname'].\"<br>\".$r['noasset'].\"<br> Rp \".$r['harga'].\"</label></div><br>\";\r\n+             \r\n             $mynumber ++;\r\n             \r\n         }\r\n         echo $mycountasset.\"||\".$mystring;\r\n"
                },
                {
                    "date": 1633669353637,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -479,9 +479,9 @@\n         $mycounter = 1;\r\n         while($r = mysqli_fetch_array($res))\r\n         {\r\n             $mycountasset += 1;\r\n-            $mystring .= \"<div class = 'row' style = 'margin-left:5px;'><label style = 'display:block;float:left;heigth:100px;font-size:12pt;' ><b>$mynumber. </b> &nbsp </label><label style = 'display:block;float:left' >\".$r['assetname'].\"<br>\".$r['noasset'].\"<br> Rp \".$r['harga'].\"</label></div><br>\";\r\n+            $mystring .= \"<div class = 'row' style = 'margin-left:5px;'><label style = 'display:block;float:left;heigth:100px;font-size:12pt;' ><b>$mynumber. </b> &nbsp </label><label style = 'display:block;float:left' >\".$r['assetname'].\"<br>\".$r['noasset'].\"</label></div><br>\";\r\n              \r\n             $mynumber ++;\r\n             \r\n         }\r\n"
                },
                {
                    "date": 1635649064761,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -102,9 +102,23 @@\n                 \"<label id ='roomfrom\".$row['id'].\"'>\".$row['myfromroom'].\"</label>\",\r\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n                 \"<label id ='remark\".$row['id'].\"'>\".$row['remark'].\"</label>\",\r\n                \r\n-                \"<label id ='leadtime\".$row['id'].\"'>\".$row['lead_time'].\"</label>\"\r\n+                \"<label id ='leadtime\".$row['id'].\"'>\".$row['lead_time'].\"</label>\",\r\n+                ' <div class=\"list-icons\">\r\n+                <div class=\"dropdown\">\r\n+                    <a href=\"#\" class=\"list-icons-item\" data-toggle=\"dropdown\">\r\n+                        <i class=\"icon-menu9\"></i>\r\n+                    </a>\r\n+    \r\n+                    <div class=\"dropdown-menu dropdown-menu-right\">\r\n+                        <a href=\"#myModalEditTransactions\"  data-toggle=\"modal\" class=\"dropdown-item\" id =\"click-'.$row['id'].'\"  onclick = \"openmodaledits(this)\"><i class=\"icon-check\"></i>\r\n+                            Edit</a>\r\n+                        \r\n+                   \r\n+                    </div>\r\n+                </div>\r\n+            </div>'\r\n             ];\r\n         }\r\n     }\r\n     \r\n"
                },
                {
                    "date": 1635652915166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,9 @@\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchto'].\"</label>\",\r\n                 \"<label id ='roomfrom\".$row['id'].\"'>\".$row['myfromroom'].\"</label>\",\r\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n-                \"<label id ='remark\".$row['id'].\"'>\".$row['remark'].\"</label>\",\r\n+                \"<label id ='remark\".$row['id'].\"'>\".$row['remark'].\"</label>\".\"<input type = 'hidden' id = 'category_\".$row['id'].\"' value = '\".$row['idcategory'].\"'>\".\"<input type = 'hidden' id = 'subgroup_\".$row['id'].\"' value = '\".$row['idsubgroup'].\"'>\".\"<input type = 'hidden' id = 'group_\".$row['id'].\"' value = '\".$row['idgroup'].\"'>\",\r\n                \r\n                 \"<label id ='leadtime\".$row['id'].\"'>\".$row['lead_time'].\"</label>\",\r\n                 ' <div class=\"list-icons\">\r\n                 <div class=\"dropdown\">\r\n"
                },
                {
                    "date": 1635653011386,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,9 +63,12 @@\n         $total_filtered = mysqli_query($conn, \"SELECT tdod.*,  lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n-        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom  where tdod.idsister = '$myses' and (\r\n+        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom\r\n+        inner join transaction_displacement_department_log tddl on tddl.idtransaksi =  tdd.id\r\n+        inner join asset on asset.id = tddl.idasset\r\n+          where tdod.idsister = '$myses' and (\r\n          tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n         OR lbranchto.branch LIKE '%$search%'\r\n         OR lfromroom.room LIKE '%$search%'\r\n"
                },
                {
                    "date": 1635653051520,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,9 +64,9 @@\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom\r\n-        inner join transaction_displacement_department_log tddl on tddl.idtransaksi =  tdd.id\r\n+        inner join transaction_displacement_other_department tddl on tddl.idtransaksi =  tdd.id\r\n         inner join asset on asset.id = tddl.idasset\r\n           where tdod.idsister = '$myses' and (\r\n          tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n"
                },
                {
                    "date": 1635653056708,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,9 +64,9 @@\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom\r\n-        inner join transaction_displacement_other_department tddl on tddl.idtransaksi =  tdd.id\r\n+        inner join transaction_displacement_other_department_log tddl on tddl.idtransaksi =  tdd.id\r\n         inner join asset on asset.id = tddl.idasset\r\n           where tdod.idsister = '$myses' and (\r\n          tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n"
                },
                {
                    "date": 1635653064937,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,9 +64,9 @@\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom\r\n-        inner join transaction_displacement_other_department_log tddl on tddl.idtransaksi =  tdd.id\r\n+        inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdd.id\r\n         inner join asset on asset.id = tddl.idasset\r\n           where tdod.idsister = '$myses' and (\r\n          tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n"
                },
                {
                    "date": 1635653075294,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,10 +64,10 @@\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom\r\n-        inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdd.id\r\n-        inner join asset on asset.id = tddl.idasset\r\n+        inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n+        inner join asset on asset.id = tdodl.idasset\r\n           where tdod.idsister = '$myses' and (\r\n          tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n         OR lbranchto.branch LIKE '%$search%'\r\n"
                },
                {
                    "date": 1635653093791,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,11 @@\n         $query_data = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n-        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom  where tdod.idsister = '$myses' and (\r\n+        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n+        inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n+        inner join asset on asset.id = tdodl.idasset  where tdod.idsister = '$myses' and (\r\n          tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n         OR lbranchto.branch LIKE '%$search%'\r\n         OR lfromroom.room LIKE '%$search%'\r\n@@ -65,9 +67,9 @@\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom\r\n         inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n-        inner join asset on asset.id = tdodl.idasset\r\n+        inner join asset on asset.id = tdodl.idasset \r\n           where tdod.idsister = '$myses' and (\r\n          tdod.notransaction LIKE '%$search%' \r\n         OR lbranchfrom.branch LIKE '%$search%'\r\n         OR lbranchto.branch LIKE '%$search%'\r\n"
                },
                {
                    "date": 1635653101929,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,11 @@\n         $total_filtered = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n-        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom  where tdod.idsister = '$myses' \");\r\n+        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n+        inner join asset on asset.id = tdodl.idasset\r\n+          where tdod.idsister = '$myses' \");\r\n     } else {\r\n         $query_data = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n"
                },
                {
                    "date": 1635653110461,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,11 @@\n     \"SELECT tdod.*,lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n     inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n     inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n     inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n-    inner join location_room ltoroom on ltoroom.id = tdod.idtoroom  where tdod.idsister = '$myses'\r\n+    inner join location_room ltoroom on ltoroom.id = tdod.idtoroom inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n+        inner join asset on asset.id = tdodl.idasset\r\n+         where tdod.idsister = '$myses'\r\n     \"\r\n \r\n );\r\n     \r\n@@ -38,9 +40,11 @@\n         $query_data = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n-        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom  where tdod.idsister = '$myses' ORDER BY $order $dir LIMIT $start, $length\");\r\n+        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n+        inner join asset on asset.id = tdodl.idasset\r\n+         where tdod.idsister = '$myses' ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n         $total_filtered = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n"
                },
                {
                    "date": 1635653147087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n     $search   = $response['search']['value'];\r\n     \r\n     $total_data = mysqli_query($conn, \r\n     \r\n-    \"SELECT tdod.*,lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+    \"SELECT tdod.*,lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  , asset.idgroup, asset.idsubgroup, asset.idcategory FROM transaction_displacement_other_department tdod\r\n     inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n     inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n     inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n     inner join location_room ltoroom on ltoroom.id = tdod.idtoroom inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n@@ -36,25 +36,25 @@\n \r\n );\r\n     \r\n     if(empty($search)) {\r\n-        $query_data = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+        $query_data = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  , asset.idgroup, asset.idsubgroup, asset.idcategory FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n         inner join asset on asset.id = tdodl.idasset\r\n          where tdod.idsister = '$myses' ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+        $total_filtered = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  , asset.idgroup, asset.idsubgroup, asset.idcategory  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n         inner join asset on asset.id = tdodl.idasset\r\n           where tdod.idsister = '$myses' \");\r\n     } else {\r\n-        $query_data = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+        $query_data = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  , asset.idgroup, asset.idsubgroup, asset.idcategory FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n@@ -67,9 +67,9 @@\n         OR ltoroom.room LIKE '%$search%' \r\n         OR tdod.remark LIKE '%$search%'\r\n         OR tdod.status_approval LIKE '%$search%' )  ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"SELECT tdod.*,  lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n+        $total_filtered = mysqli_query($conn, \"SELECT tdod.*,  lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom , asset.idgroup, asset.idsubgroup, asset.idcategory  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom\r\n"
                },
                {
                    "date": 1635653179713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n     inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n     inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n     inner join location_room ltoroom on ltoroom.id = tdod.idtoroom inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n         inner join asset on asset.id = tdodl.idasset\r\n-         where tdod.idsister = '$myses'\r\n+         where tdod.idsister = '$myses'  group by tdod.id \r\n     \"\r\n \r\n );\r\n     \r\n"
                },
                {
                    "date": 1635653184965,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n         inner join asset on asset.id = tdodl.idasset\r\n-         where tdod.idsister = '$myses' ORDER BY $order $dir LIMIT $start, $length\");\r\n+         where tdod.idsister = '$myses'   group by tdod.id  ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n         $total_filtered = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  , asset.idgroup, asset.idsubgroup, asset.idcategory  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n"
                },
                {
                    "date": 1635653193079,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,9 @@\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n         inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n         inner join location_room ltoroom on ltoroom.id = tdod.idtoroom inner join transaction_displacement_other_department_log tdodl on tdodl.idtransaksi =  tdod.id\r\n         inner join asset on asset.id = tdodl.idasset\r\n-          where tdod.idsister = '$myses' \");\r\n+          where tdod.idsister = '$myses'    group by tdod.id \");\r\n     } else {\r\n         $query_data = mysqli_query($conn, \"SELECT tdod.*, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  , asset.idgroup, asset.idsubgroup, asset.idcategory FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n@@ -65,9 +65,9 @@\n         OR lbranchto.branch LIKE '%$search%'\r\n         OR lfromroom.room LIKE '%$search%'\r\n         OR ltoroom.room LIKE '%$search%' \r\n         OR tdod.remark LIKE '%$search%'\r\n-        OR tdod.status_approval LIKE '%$search%' )  ORDER BY $order $dir LIMIT $start, $length\");\r\n+        OR tdod.status_approval LIKE '%$search%' )    group by tdod.id  ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n         $total_filtered = mysqli_query($conn, \"SELECT tdod.*,  lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom , asset.idgroup, asset.idsubgroup, asset.idcategory  FROM transaction_displacement_other_department tdod\r\n         inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n         inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n@@ -81,9 +81,9 @@\n         OR lbranchto.branch LIKE '%$search%'\r\n         OR lfromroom.room LIKE '%$search%'\r\n         OR ltoroom.room LIKE '%$search%' \r\n         OR tdod.remark LIKE '%$search%'\r\n-        OR tdod.status_approval LIKE '%$search%' )\");\r\n+        OR tdod.status_approval LIKE '%$search%' ) v\");\r\n     }\r\n     \r\n     $response['data'] = [];\r\n     \r\n"
                },
                {
                    "date": 1635655790606,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,9 @@\n         OR lbranchto.branch LIKE '%$search%'\r\n         OR lfromroom.room LIKE '%$search%'\r\n         OR ltoroom.room LIKE '%$search%' \r\n         OR tdod.remark LIKE '%$search%'\r\n-        OR tdod.status_approval LIKE '%$search%' ) v\");\r\n+        OR tdod.status_approval LIKE '%$search%' )   group by tdod.id \");\r\n     }\r\n     \r\n     $response['data'] = [];\r\n     \r\n@@ -113,9 +113,13 @@\n                 \"<label id ='roomfrom\".$row['id'].\"'>\".$row['myfromroom'].\"</label>\",\r\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n                 \"<label id ='remark\".$row['id'].\"'>\".$row['remark'].\"</label>\".\"<input type = 'hidden' id = 'category_\".$row['id'].\"' value = '\".$row['idcategory'].\"'>\".\"<input type = 'hidden' id = 'subgroup_\".$row['id'].\"' value = '\".$row['idsubgroup'].\"'>\".\"<input type = 'hidden' id = 'group_\".$row['id'].\"' value = '\".$row['idgroup'].\"'>\",\r\n                \r\n-                \"<label id ='leadtime\".$row['id'].\"'>\".$row['lead_time'].\"</label>\",\r\n+                \"<label id ='leadtime\".$row['id'].\"'>\".$row['lead_time'].\"</label>\".\r\n+                \"<input type = 'hidden' id = 'branch_\".$row['id'].\"' value = '\".$row['idbranch'].\"'>\".\r\n+                \"<input type = 'hidden' id = 'department_\".$row['id'].\"' value = '\".$row['iddepartment'].\"'>\".\r\n+                \"<input type = 'hidden' id = 'fromroom_\".$row['id'].\"' value = '\".$row['idfromroom'].\"'>\".\r\n+                \"<input type = 'hidden' id = 'toroom_\".$row['id'].\"' value = '\".$row['idtoroom'].\"'>\",,\r\n                 ' <div class=\"list-icons\">\r\n                 <div class=\"dropdown\">\r\n                     <a href=\"#\" class=\"list-icons-item\" data-toggle=\"dropdown\">\r\n                         <i class=\"icon-menu9\"></i>\r\n"
                },
                {
                    "date": 1635655795896,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,9 +117,9 @@\n                 \"<label id ='leadtime\".$row['id'].\"'>\".$row['lead_time'].\"</label>\".\r\n                 \"<input type = 'hidden' id = 'branch_\".$row['id'].\"' value = '\".$row['idbranch'].\"'>\".\r\n                 \"<input type = 'hidden' id = 'department_\".$row['id'].\"' value = '\".$row['iddepartment'].\"'>\".\r\n                 \"<input type = 'hidden' id = 'fromroom_\".$row['id'].\"' value = '\".$row['idfromroom'].\"'>\".\r\n-                \"<input type = 'hidden' id = 'toroom_\".$row['id'].\"' value = '\".$row['idtoroom'].\"'>\",,\r\n+                \"<input type = 'hidden' id = 'toroom_\".$row['id'].\"' value = '\".$row['idtoroom'].\"'>\",\r\n                 ' <div class=\"list-icons\">\r\n                 <div class=\"dropdown\">\r\n                     <a href=\"#\" class=\"list-icons-item\" data-toggle=\"dropdown\">\r\n                         <i class=\"icon-menu9\"></i>\r\n"
                },
                {
                    "date": 1635655845926,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,10 +114,10 @@\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n                 \"<label id ='remark\".$row['id'].\"'>\".$row['remark'].\"</label>\".\"<input type = 'hidden' id = 'category_\".$row['id'].\"' value = '\".$row['idcategory'].\"'>\".\"<input type = 'hidden' id = 'subgroup_\".$row['id'].\"' value = '\".$row['idsubgroup'].\"'>\".\"<input type = 'hidden' id = 'group_\".$row['id'].\"' value = '\".$row['idgroup'].\"'>\",\r\n                \r\n                 \"<label id ='leadtime\".$row['id'].\"'>\".$row['lead_time'].\"</label>\".\r\n-                \"<input type = 'hidden' id = 'branch_\".$row['id'].\"' value = '\".$row['idbranch'].\"'>\".\r\n-                \"<input type = 'hidden' id = 'department_\".$row['id'].\"' value = '\".$row['iddepartment'].\"'>\".\r\n+                \"<input type = 'hidden' id = 'branch_\".$row['id'].\"' value = '\".$row['idbranchfrom'].\"'>\".\r\n+                \"<input type = 'hidden' id = 'department_\".$row['id'].\"' value = '\".$row['idbranchto'].\"'>\".\r\n                 \"<input type = 'hidden' id = 'fromroom_\".$row['id'].\"' value = '\".$row['idfromroom'].\"'>\".\r\n                 \"<input type = 'hidden' id = 'toroom_\".$row['id'].\"' value = '\".$row['idtoroom'].\"'>\",\r\n                 ' <div class=\"list-icons\">\r\n                 <div class=\"dropdown\">\r\n"
                },
                {
                    "date": 1635655854719,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,9 +114,9 @@\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n                 \"<label id ='remark\".$row['id'].\"'>\".$row['remark'].\"</label>\".\"<input type = 'hidden' id = 'category_\".$row['id'].\"' value = '\".$row['idcategory'].\"'>\".\"<input type = 'hidden' id = 'subgroup_\".$row['id'].\"' value = '\".$row['idsubgroup'].\"'>\".\"<input type = 'hidden' id = 'group_\".$row['id'].\"' value = '\".$row['idgroup'].\"'>\",\r\n                \r\n                 \"<label id ='leadtime\".$row['id'].\"'>\".$row['lead_time'].\"</label>\".\r\n-                \"<input type = 'hidden' id = 'branch_\".$row['id'].\"' value = '\".$row['idbranchfrom'].\"'>\".\r\n+                \"<input type = 'hidden' id = 'branchfrom_\".$row['id'].\"' value = '\".$row['idbranchfrom'].\"'>\".\r\n                 \"<input type = 'hidden' id = 'department_\".$row['id'].\"' value = '\".$row['idbranchto'].\"'>\".\r\n                 \"<input type = 'hidden' id = 'fromroom_\".$row['id'].\"' value = '\".$row['idfromroom'].\"'>\".\r\n                 \"<input type = 'hidden' id = 'toroom_\".$row['id'].\"' value = '\".$row['idtoroom'].\"'>\",\r\n                 ' <div class=\"list-icons\">\r\n"
                },
                {
                    "date": 1635655860523,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,9 +115,9 @@\n                 \"<label id ='remark\".$row['id'].\"'>\".$row['remark'].\"</label>\".\"<input type = 'hidden' id = 'category_\".$row['id'].\"' value = '\".$row['idcategory'].\"'>\".\"<input type = 'hidden' id = 'subgroup_\".$row['id'].\"' value = '\".$row['idsubgroup'].\"'>\".\"<input type = 'hidden' id = 'group_\".$row['id'].\"' value = '\".$row['idgroup'].\"'>\",\r\n                \r\n                 \"<label id ='leadtime\".$row['id'].\"'>\".$row['lead_time'].\"</label>\".\r\n                 \"<input type = 'hidden' id = 'branchfrom_\".$row['id'].\"' value = '\".$row['idbranchfrom'].\"'>\".\r\n-                \"<input type = 'hidden' id = 'department_\".$row['id'].\"' value = '\".$row['idbranchto'].\"'>\".\r\n+                \"<input type = 'hidden' id = 'branchto_\".$row['id'].\"' value = '\".$row['idbranchto'].\"'>\".\r\n                 \"<input type = 'hidden' id = 'fromroom_\".$row['id'].\"' value = '\".$row['idfromroom'].\"'>\".\r\n                 \"<input type = 'hidden' id = 'toroom_\".$row['id'].\"' value = '\".$row['idtoroom'].\"'>\",\r\n                 ' <div class=\"list-icons\">\r\n                 <div class=\"dropdown\">\r\n"
                },
                {
                    "date": 1635657598615,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -409,8 +409,11 @@\n         echo \"tidak\";\r\n     }\r\n     // echo $sql;\r\n }\r\n+else if($tipe == \"edit\"){\r\n+\r\n+}\r\n else if($tipe == \"changedata\")\r\n {\r\n     $id  = $_POST['myid'];\r\n     $idsister = $_SESSION['idsister'];\r\n"
                },
                {
                    "date": 1635657648627,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -410,9 +410,30 @@\n     }\r\n     // echo $sql;\r\n }\r\n else if($tipe == \"edit\"){\r\n+    $myselectedlist = $_POST['myselect'];\r\n+    $idsister = $myses;\r\n+    $mybranch = $_POST['mybranch'];\r\n+    $mydepartment = $_POST['mydepartment'];\r\n+    $myfromroom = $_POST['myfromroom'];\r\n+    $mytoroom = $_POST['mytoroom'];\r\n+    $myremark = $_POST['myremark'];\r\n+    $mytransactions = $_POST['mytransactions'];\r\n \r\n+    $sql = \"update transaction_displacement_department set idbranch = '$mybranch', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n+    $res = $conn->query($sql);\r\n+    // echo $sql;\r\n+    $sql = \"delete from transaction_displacement_department_log where idtransaksi = '$mytransactions'\";\r\n+    $res = $conn->query($sql);\r\n+\r\n+  \r\n+\r\n+    for($i = 0 ; $i< count($myselectedlist); $i++)\r\n+    {\r\n+        $sql = \"insert into transaction_displacement_department_log values(NULL, '$mytransactions', '\".$myselectedlist[$i].\"')\";\r\n+        $ress = $conn->query($sql);\r\n+    }\r\n }\r\n else if($tipe == \"changedata\")\r\n {\r\n     $id  = $_POST['myid'];\r\n"
                },
                {
                    "date": 1635657703245,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -413,8 +413,9 @@\n else if($tipe == \"edit\"){\r\n     $myselectedlist = $_POST['myselect'];\r\n     $idsister = $myses;\r\n     $mybranch = $_POST['mybranch'];\r\n+    $mybranch = $_POST['mybranch'];\r\n     $mydepartment = $_POST['mydepartment'];\r\n     $myfromroom = $_POST['myfromroom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n"
                },
                {
                    "date": 1635657708686,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -412,10 +412,10 @@\n }\r\n else if($tipe == \"edit\"){\r\n     $myselectedlist = $_POST['myselect'];\r\n     $idsister = $myses;\r\n-    $mybranch = $_POST['mybranch'];\r\n-    $mybranch = $_POST['mybranch'];\r\n+    $mybranch = $_POST['mybranchfrom'];\r\n+    $mybranch = $_POST['mybranchto'];\r\n     $mydepartment = $_POST['mydepartment'];\r\n     $myfromroom = $_POST['myfromroom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n"
                },
                {
                    "date": 1635657722108,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -412,10 +412,10 @@\n }\r\n else if($tipe == \"edit\"){\r\n     $myselectedlist = $_POST['myselect'];\r\n     $idsister = $myses;\r\n-    $mybranch = $_POST['mybranchfrom'];\r\n-    $mybranch = $_POST['mybranchto'];\r\n+    $mybranchfrom = $_POST['mybranchfrom'];\r\n+    $mybranchto = $_POST['mybranchto'];\r\n     $mydepartment = $_POST['mydepartment'];\r\n     $myfromroom = $_POST['myfromroom'];\r\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n"
                },
                {
                    "date": 1635657889834,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -420,9 +420,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     $mytransactions = $_POST['mytransactions'];\r\n \r\n-    $sql = \"update transaction_displacement_department set idbranch = '$mybranch', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n+    $sql = \"update transaction_displacement_other_department set idbranch = '$mybranch', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n     // echo $sql;\r\n     $sql = \"delete from transaction_displacement_department_log where idtransaksi = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n"
                },
                {
                    "date": 1635657895298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -423,9 +423,9 @@\n \r\n     $sql = \"update transaction_displacement_other_department set idbranch = '$mybranch', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n     // echo $sql;\r\n-    $sql = \"delete from transaction_displacement_department_log where idtransaksi = '$mytransactions'\";\r\n+    $sql = \"delete from transaction_displacement_other_department_log where idtransaksi = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n \r\n   \r\n \r\n"
                },
                {
                    "date": 1635657924303,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -420,9 +420,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     $mytransactions = $_POST['mytransactions'];\r\n \r\n-    $sql = \"update transaction_displacement_other_department set idbranch = '$mybranch', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n+    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n     // echo $sql;\r\n     $sql = \"delete from transaction_displacement_other_department_log where idtransaksi = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n"
                },
                {
                    "date": 1635657930524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -420,9 +420,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     $mytransactions = $_POST['mytransactions'];\r\n \r\n-    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n+    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', idbranchfrom = '$mybranchfrom', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n     // echo $sql;\r\n     $sql = \"delete from transaction_displacement_other_department_log where idtransaksi = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n"
                },
                {
                    "date": 1635657940985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -420,9 +420,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     $mytransactions = $_POST['mytransactions'];\r\n \r\n-    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', idbranchfrom = '$mybranchfrom', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n+    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', idbranchto = '$mybranchto', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n     // echo $sql;\r\n     $sql = \"delete from transaction_displacement_other_department_log where idtransaksi = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n"
                },
                {
                    "date": 1635657971031,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -420,9 +420,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     $mytransactions = $_POST['mytransactions'];\r\n \r\n-    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', idbranchto = '$mybranchto', iddepartment = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n+    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', idbranchto = '$mybranchto', idfromroom = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n     // echo $sql;\r\n     $sql = \"delete from transaction_displacement_other_department_log where idtransaksi = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n"
                },
                {
                    "date": 1635657981912,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -420,9 +420,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     $mytransactions = $_POST['mytransactions'];\r\n \r\n-    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', idbranchto = '$mybranchto', idfromroom = '$mydepartment', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n+    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', idbranchto = '$mybranchto', idfromroom = '$myfromroom'idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n     // echo $sql;\r\n     $sql = \"delete from transaction_displacement_other_department_log where idtransaksi = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n"
                },
                {
                    "date": 1635657999266,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -420,9 +420,9 @@\n     $mytoroom = $_POST['mytoroom'];\r\n     $myremark = $_POST['myremark'];\r\n     $mytransactions = $_POST['mytransactions'];\r\n \r\n-    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', idbranchto = '$mybranchto', idfromroom = '$myfromroom'idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n+    $sql = \"update transaction_displacement_other_department set idbranchfrom = '$mybranchfrom', idbranchto = '$mybranchto', idfromroom = '$myfromroom', idtoroom = '$mytoroom', remark = '$myremark'   where id = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n     // echo $sql;\r\n     $sql = \"delete from transaction_displacement_other_department_log where idtransaksi = '$mytransactions'\";\r\n     $res = $conn->query($sql);\r\n"
                },
                {
                    "date": 1635658005164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -430,9 +430,9 @@\n   \r\n \r\n     for($i = 0 ; $i< count($myselectedlist); $i++)\r\n     {\r\n-        $sql = \"insert into transaction_displacement_department_log values(NULL, '$mytransactions', '\".$myselectedlist[$i].\"')\";\r\n+        $sql = \"insert into transaction_displacement_other_department_log values(NULL, '$mytransactions', '\".$myselectedlist[$i].\"')\";\r\n         $ress = $conn->query($sql);\r\n     }\r\n }\r\n else if($tipe == \"changedata\")\r\n"
                },
                {
                    "date": 1637659632038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,8 +105,9 @@\n             // $myrelation = str_replace( \" \", ' ', $row['myrelation'] ); \r\n             $response['data'][] = [\r\n                 // \"<a href= '#myModalDisplay'  data-toggle='modal'><span class='pointer-element badge badge-success' id ='\".$row['id'].\"' onclick = 'openmodaldisplay(this)'  data-id='\".$row['id'].\"'><i class='icon-plus3'></i></span></a>\",\r\n                 \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n+                \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n                 \"<a href = '#myModalDetailTransaction' id = '\".$row['id'].\"' onclick = openmodaldetailtransaction(this) data-toggle='modal'><label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label></a>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchto'].\"</label>\",\r\n"
                },
                {
                    "date": 1637659643817,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,10 +104,10 @@\n             }\r\n             // $myrelation = str_replace( \" \", ' ', $row['myrelation'] ); \r\n             $response['data'][] = [\r\n                 // \"<a href= '#myModalDisplay'  data-toggle='modal'><span class='pointer-element badge badge-success' id ='\".$row['id'].\"' onclick = 'openmodaldisplay(this)'  data-id='\".$row['id'].\"'><i class='icon-plus3'></i></span></a>\",\r\n+                \"<b><label id ='id\".$row['id'].\"'  >\".$row['$id'].\"</label></b>\",\r\n                 \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n-                \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n                 \"<a href = '#myModalDetailTransaction' id = '\".$row['id'].\"' onclick = openmodaldetailtransaction(this) data-toggle='modal'><label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label></a>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchto'].\"</label>\",\r\n"
                },
                {
                    "date": 1637659717896,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,10 +6,15 @@\n if($tipe == \"load\")\r\n {\r\n \r\n     $where_like = [\r\n+        'id',\r\n+        'status_approval',\r\n+        'mydate',\r\n+        'notransaction'\r\n+        \r\n+        'branchfrom',\r\n         'branchto',\r\n-        'branchfrom',\r\n         'roomfrom',\r\n         'toroom',\r\n         'status_approval',\r\n         'remark'\r\n"
                },
                {
                    "date": 1637659734608,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,13 +9,12 @@\n     $where_like = [\r\n         'id',\r\n         'status_approval',\r\n         'mydate',\r\n-        'notransaction'\r\n-        \r\n+        'notransaction',        \r\n         'branchfrom',\r\n         'branchto',\r\n-        'roomfrom',\r\n+        'myfromroom',\r\n         'toroom',\r\n         'status_approval',\r\n         'remark'\r\n         \r\n"
                },
                {
                    "date": 1637659741127,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,8 @@\n         'branchfrom',\r\n         'branchto',\r\n         'myfromroom',\r\n         'toroom',\r\n-        'status_approval',\r\n         'remark'\r\n         \r\n     ];\r\n     \r\n"
                },
                {
                    "date": 1637659770789,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,9 +112,9 @@\n                 \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n                 \"<a href = '#myModalDetailTransaction' id = '\".$row['id'].\"' onclick = openmodaldetailtransaction(this) data-toggle='modal'><label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label></a>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n-                \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchto'].\"</label>\",\r\n+                \"<label id ='branchto\".$row['id'].\"'>\".$row['branchto'].\"</label>\",\r\n                 \"<label id ='roomfrom\".$row['id'].\"'>\".$row['myfromroom'].\"</label>\",\r\n                 \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n                 \"<label id ='remark\".$row['id'].\"'>\".$row['remark'].\"</label>\".\"<input type = 'hidden' id = 'category_\".$row['id'].\"' value = '\".$row['idcategory'].\"'>\".\"<input type = 'hidden' id = 'subgroup_\".$row['id'].\"' value = '\".$row['idsubgroup'].\"'>\".\"<input type = 'hidden' id = 'group_\".$row['id'].\"' value = '\".$row['idgroup'].\"'>\",\r\n                \r\n"
                },
                {
                    "date": 1637659794155,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,10 @@\n         'branchfrom',\r\n         'branchto',\r\n         'myfromroom',\r\n         'toroom',\r\n-        'remark'\r\n+        'remark',\r\n+        ''\r\n         \r\n     ];\r\n     \r\n     $response = $_REQUEST;\r\n"
                },
                {
                    "date": 1637660102709,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,8 +15,9 @@\n         'branchto',\r\n         'myfromroom',\r\n         'toroom',\r\n         'remark',\r\n+        ','\r\n         ''\r\n         \r\n     ];\r\n     \r\n"
                },
                {
                    "date": 1637660115665,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,11 +14,9 @@\n         'branchfrom',\r\n         'branchto',\r\n         'myfromroom',\r\n         'toroom',\r\n-        'remark',\r\n-        ','\r\n-        ''\r\n+        'remark'\r\n         \r\n     ];\r\n     \r\n     $response = $_REQUEST;\r\n"
                },
                {
                    "date": 1637660121158,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,10 @@\n         'branchfrom',\r\n         'branchto',\r\n         'myfromroom',\r\n         'toroom',\r\n-        'remark'\r\n+        'remark',\r\n+        ''\r\n         \r\n     ];\r\n     \r\n     $response = $_REQUEST;\r\n"
                },
                {
                    "date": 1637660170892,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n         'branchto',\r\n         'myfromroom',\r\n         'toroom',\r\n         'remark',\r\n-        ''\r\n+        'lead_time'\r\n         \r\n     ];\r\n     \r\n     $response = $_REQUEST;\r\n"
                },
                {
                    "date": 1637660369149,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,10 @@\n         'branchto',\r\n         'myfromroom',\r\n         'toroom',\r\n         'remark',\r\n-        'lead_time'\r\n+        'lead_time',\r\n+        ''\r\n         \r\n     ];\r\n     \r\n     $response = $_REQUEST;\r\n"
                },
                {
                    "date": 1637819985513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n             }\r\n             // $myrelation = str_replace( \" \", ' ', $row['myrelation'] ); \r\n             $response['data'][] = [\r\n                 // \"<a href= '#myModalDisplay'  data-toggle='modal'><span class='pointer-element badge badge-success' id ='\".$row['id'].\"' onclick = 'openmodaldisplay(this)'  data-id='\".$row['id'].\"'><i class='icon-plus3'></i></span></a>\",\r\n-                \"<b><label id ='id\".$row['id'].\"'  >\".$row['$id'].\"</label></b>\",\r\n+                // \"<b><label id ='id\".$row['id'].\"'  >\".$row['$id'].\"</label></b>\",\r\n                 \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n                 \"<a href = '#myModalDetailTransaction' id = '\".$row['id'].\"' onclick = openmodaldetailtransaction(this) data-toggle='modal'><label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label></a>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n"
                },
                {
                    "date": 1637820031610,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n if($tipe == \"load\")\r\n {\r\n \r\n     $where_like = [\r\n-        'id',\r\n+        // 'id',\r\n         'status_approval',\r\n         'mydate',\r\n         'notransaction',        \r\n         'branchfrom',\r\n"
                },
                {
                    "date": 1637820061849,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n if($tipe == \"load\")\r\n {\r\n \r\n     $where_like = [\r\n-        // 'id',\r\n+        'id',\r\n         'status_approval',\r\n         'mydate',\r\n         'notransaction',        \r\n         'branchfrom',\r\n"
                },
                {
                    "date": 1637820083510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n             }\r\n             // $myrelation = str_replace( \" \", ' ', $row['myrelation'] ); \r\n             $response['data'][] = [\r\n                 // \"<a href= '#myModalDisplay'  data-toggle='modal'><span class='pointer-element badge badge-success' id ='\".$row['id'].\"' onclick = 'openmodaldisplay(this)'  data-id='\".$row['id'].\"'><i class='icon-plus3'></i></span></a>\",\r\n-                // \"<b><label id ='id\".$row['id'].\"'  >\".$row['$id'].\"</label></b>\",\r\n+                \"<b><label id ='id\".$row['id'].\"'  >\".$row['$id'].\"</label></b>\",\r\n                 \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n                 \"<a href = '#myModalDetailTransaction' id = '\".$row['id'].\"' onclick = openmodaldetailtransaction(this) data-toggle='modal'><label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label></a>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n"
                },
                {
                    "date": 1637820113810,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n if($tipe == \"load\")\r\n {\r\n \r\n     $where_like = [\r\n-        'id',\r\n+        // 'id',\r\n         'status_approval',\r\n         'mydate',\r\n         'notransaction',        \r\n         'branchfrom',\r\n"
                },
                {
                    "date": 1637820178751,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n             }\r\n             // $myrelation = str_replace( \" \", ' ', $row['myrelation'] ); \r\n             $response['data'][] = [\r\n                 // \"<a href= '#myModalDisplay'  data-toggle='modal'><span class='pointer-element badge badge-success' id ='\".$row['id'].\"' onclick = 'openmodaldisplay(this)'  data-id='\".$row['id'].\"'><i class='icon-plus3'></i></span></a>\",\r\n-                \"<b><label id ='id\".$row['id'].\"'  >\".$row['$id'].\"</label></b>\",\r\n+                \"<b><label id ='id\".$row['id'].\"'  >\".$row['id'].\"</label></b>\",\r\n                 \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                 \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n                 \"<a href = '#myModalDetailTransaction' id = '\".$row['id'].\"' onclick = openmodaldetailtransaction(this) data-toggle='modal'><label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label></a>\",\r\n                 \"<label id ='branchfrom\".$row['id'].\"'>\".$row['branchfrom'].\"</label>\",\r\n"
                },
                {
                    "date": 1637820183868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n if($tipe == \"load\")\r\n {\r\n \r\n     $where_like = [\r\n-        // 'id',\r\n+        'id',\r\n         'status_approval',\r\n         'mydate',\r\n         'notransaction',        \r\n         'branchfrom',\r\n"
                }
            ],
            "date": 1632905661845,
            "name": "Commit-0",
            "content": "<?php\r\nrequire '../connection.php';\r\nsession_start();\r\n$myses = $_SESSION['idsister'];\r\n$tipe = $_POST['tipe'];\r\nif($tipe == \"load\")\r\n{\r\n\r\n    $where_like = [\r\n        'assetname',\r\n        'noasset',\r\n        'branch',\r\n        'roomfroom',\r\n        'toroom',\r\n        'status_approval',\r\n        'remark'\r\n        \r\n    ];\r\n    \r\n    $response = $_REQUEST;\r\n    $start    = $response['start'];\r\n    $length   = $response['length'];\r\n    $order    = $where_like[$response['order'][0]['column']];\r\n    $dir      = $response['order'][0]['dir'];\r\n    $search   = $response['search']['value'];\r\n    \r\n    $total_data = mysqli_query($conn, \r\n    \r\n    \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n    inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n    inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n    inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n    inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n    inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses'\r\n    \"\r\n\r\n);\r\n    \r\n    if(empty($search)) {\r\n        $query_data = mysqli_query($conn, \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n        inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n        inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n        inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n        inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' ORDER BY $order $dir LIMIT $start, $length\");\r\n    \r\n        $total_filtered = mysqli_query($conn, \"SELECT tdod.*, asset.noasset, asset.name as assetname, lbranchfrom.branch as branchfrom, lbranchto.branch as branchto, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_other_department tdod\r\n        inner join location_branch lbranchfrom on lbranchfrom.idbranch = tdod.idbranchfrom\r\n        inner join location_branch lbranchto on lbranchto.idbranch = tdod.idbranchto\r\n        inner join location_room lfromroom on lfromroom.id = tdod.idfromroom \r\n        inner join location_room ltoroom on ltoroom.id = tdod.idtoroom \r\n        inner join asset on asset.id = tdod.idasset where tdod.idsister = '$myses' \");\r\n    } else {\r\n        $query_data = mysqli_query($conn, \"SELECT tdd.*, asset.noasset, asset.name as assetname, lbranch.branch, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_department tdd\r\n        inner join location_branch lbranch on lbranch.idbranch = tdd.idbranch\r\n        inner join location_room lfromroom on lfromroom.id = tdd.idfromroom\r\n        inner join location_room ltoroom on ltoroom.id = tdd.idtoroom \r\n        inner join asset on asset.id = tdd.idasset where tdd.idsister = '$myses' and (\r\n         tdd.notransaction LIKE '%$search%' \r\n        OR lbranch.branch LIKE '%$search%'\r\n        OR asset.noasset LIKE '%$search%'\r\n        OR asset.name LIKE '%$search%'\r\n        OR tdd.remark LIKE '%$search%'\r\n        OR tdd.status_approval LIKE '%$search%' )  ORDER BY $order $dir LIMIT $start, $length\");\r\n    \r\n        $total_filtered = mysqli_query($conn, \"SELECT tdd.*, asset.noasset, asset.name as assetname, lbranch.branch, lfromroom.room as myfromroom, ltoroom.room as toroom  FROM transaction_displacement_department tdd\r\n        inner join location_branch lbranch on lbranch.idbranch = tdd.idbranch\r\n        inner join location_room lfromroom on lfromroom.id = tdd.idfromroom\r\n        inner join location_room ltoroom on ltoroom.id = tdd.idtoroom \r\n        inner join asset on asset.id = tdd.idasset where tdd.idsister = '$myses' and (\r\n         tdd.notransaction LIKE '%$search%' \r\n        OR lbranch.branch LIKE '%$search%'\r\n        OR asset.noasset LIKE '%$search%'\r\n        OR asset.name LIKE '%$search%'\r\n        OR tdd.remark LIKE '%$search%'\r\n        OR tdd.status_approval LIKE '%$search%' )\");\r\n    }\r\n    \r\n    $response['data'] = [];\r\n    \r\n    if($query_data) {\r\n        while($row = mysqli_fetch_assoc($query_data)) {\r\n            $myapproval = \"\";\r\n            if($row['status_approval'] == \"pending\")\r\n            {\r\n                $myapproval = \"<span style = 'color:#e37e02'><i class='mi-info'></i> &nbsp Pending </span>\";\r\n            }\r\n            else if($row['status_approval'] == \"rejected\")\r\n            {\r\n                $myapproval = \"<span style = 'color:#e32702'><i class='mi-cancel'></i> &nbsp Rejected </span>\";\r\n            }\r\n            else if($row['status_approval'] == \"accepted\")\r\n            {\r\n                $myapproval = \"<span style = 'color:#2aa602'><i class='mi-check-box'></i> &nbspAccepted </span>\";\r\n            }\r\n            // $myrelation = str_replace( \" \", ' ', $row['myrelation'] ); \r\n            $response['data'][] = [\r\n                // \"<a href= '#myModalDisplay'  data-toggle='modal'><span class='pointer-element badge badge-success' id ='\".$row['id'].\"' onclick = 'openmodaldisplay(this)'  data-id='\".$row['id'].\"'><i class='icon-plus3'></i></span></a>\",\r\n                \"<b><label id ='statusapproval\".$row['id'].\"'  >\".$myapproval.\"</label></b>\",\r\n                \"<label id ='mydate\".$row['id'].\"'>\".$row['mydate'].\"</label>\",\r\n                \"<label id ='notransaction\".$row['id'].\"'>\".$row['notransaction'].\"</label>\",\r\n                \"<label id ='branch\".$row['id'].\"'>\".$row['branch'].\"</label>\",\r\n                \"<label id ='noasset\".$row['id'].\"'>\".$row['noasset'].\"</label>\",\r\n                \"<label id ='assetname\".$row['id'].\"'>\".$row['assetname'].\"</label>\",\r\n                \"<label id ='roomfrom\".$row['id'].\"'>\".$row['myfromroom'].\"</label>\",\r\n                \"<label id ='toroom\".$row['id'].\"'>\".$row['toroom'].\"</label>\",\r\n                \"<label id ='remark\".$row['id'].\"'>\".$row['remark'].\"</label>\",\r\n               \r\n                \"<label id ='leadtime\".$row['id'].\"'>\".$row['lead_time'].\"</label>\"\r\n            ];\r\n        }\r\n    }\r\n    \r\n    $response['recordsTotal'] = 0;\r\n    if($total_data <> FALSE) {\r\n        $response['recordsTotal'] = mysqli_num_rows($total_data);\r\n    }\r\n    \r\n    $response['recordsFiltered'] = 0;\r\n    if($total_filtered <> FALSE) {\r\n        $response['recordsFiltered'] = mysqli_num_rows($total_filtered);\r\n    }  \r\n    \r\n    echo json_encode($response);\r\n}\r\nelse if($tipe == \"gettemplatecategory\")\r\n{\r\n    $idcategory = $_POST['idcategory'];\r\n    $sql = \"select template.id, template.template from kategori_categorysubgroup kcs inner join template on template.id = kcs.idtemplate where kcs.id = '$idcategory'\";\r\n    $res = $conn->query($sql);\r\n    $row = mysqli_fetch_array($res);\r\n    \r\n    if($res->num_rows>0)\r\n    {\r\n        $idtemplate = $row['id'];\r\n        $nametemplate = $row['template'];\r\n        echo $idtemplate.\"~~~\";\r\n        echo $nametemplate.\"~~~\";\r\n        $sqls = \"select folder_custom.*, custom_to_template.id as idquestion  from custom_to_template inner join folder_custom on folder_custom.id = custom_to_template.idcustom where custom_to_template.idtemplate = '$idtemplate'\"; \r\n        $ress = $conn->query($sqls);\r\n        // echo $sqls;\r\n        if($ress -> num_rows>0)\r\n        {\r\n            $mystring = \"\";\r\n            $mycode = \"\";\r\n            $myindex = 0 ;\r\n            while($r = mysqli_fetch_array($ress))\r\n            {\r\n                if($myindex == 0)\r\n                {\r\n                    $mycode .= $r['id'];\r\n                }\r\n                else{\r\n                    $mycode .= \",\".$r['id'];\r\n                }\r\n                $myindex++;\r\n               \r\n                $mystring .=  '\r\n                <div class=\"row\">\r\n                  <div class=\"col-md-12\">\r\n                        <div class=\"form-group\">\r\n                            <label>'.$r['name'].' </label>\r\n                            <input type=\"text\" name=\"custom'.$r['idquestion'].'\" placeholder=\"Enter '.$r['name'].'\" class=\"form-control required\" id = \"startwarranty\"><br>\r\n                        </div>\r\n                    </div>\r\n                </div>';\r\n            }\r\n            echo $mycode.\"~~\".$mystring;\r\n        }\r\n        else{\r\n            echo \"none\";\r\n        }\r\n    }\r\n    else{\r\n        echo \"another\";\r\n    }\r\n\r\n}\r\nelse if($tipe == \"getallanswer\")\r\n{\r\n\r\n    $idasset = $_POST['idassets'];\r\n    $sql = \"select folder_custom.name as namequestion, custom_template_answer.answer from custom_template_answer \r\n    inner join custom_to_template on custom_to_template.id = custom_template_answer.id_custom_to_template\r\n    inner join folder_custom on folder_custom.id = custom_to_template.idcustom\r\n    where custom_template_answer.idasset = '$idasset'\";\r\n  \r\n    $res = $conn->query($sql);\r\n    if($res -> num_rows>0)\r\n    {\r\n        // echo $sql;\r\n        $mystring = \"\";\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n        \r\n            $mystring .=  '\r\n            <div class=\"row\">\r\n              <div class=\"col-md-12\">\r\n                    <div class=\"form-group\">\r\n                        <label>'.$r['namequestion'].' </label><br>\r\n                        <b><label>'.$r['answer'].'</label></b>\r\n                    </div>\r\n                </div>\r\n            </div>';\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n}\r\nelse if($tipe == \"getcustomquestion\")\r\n{\r\n    $idtemplate = $_POST['idtemplate'];\r\n    $sql = \"select folder_custom.*, custom_to_template.id as idquestion  from custom_to_template inner join folder_custom on folder_custom.id = custom_to_template.idcustom where custom_to_template.idtemplate = '$idtemplate'\"; \r\n    $res = $conn->query($sql);\r\n    if($res -> num_rows>0)\r\n    {\r\n        $mystring = \"\";\r\n        $mycode = \"\";\r\n        $myindex = 0 ;\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            if($myindex == 0)\r\n            {\r\n                $mycode .= $r['id'];\r\n            }\r\n            else{\r\n                $mycode .= \",\".$r['id'];\r\n            }\r\n            $myindex++;\r\n           \r\n            $mystring .=  '\r\n            <div class=\"row\">\r\n              <div class=\"col-md-12\">\r\n                    <div class=\"form-group\">\r\n                        <label>'.$r['name'].' </label>\r\n                        <input type=\"text\" name=\"custom'.$r['idquestion'].'\" placeholder=\"Enter '.$r['name'].'\" class=\"form-control required\" id = \"startwarranty\"><br>\r\n                    </div>\r\n                </div>\r\n            </div>';\r\n        }\r\n        echo $mycode.\"~~\".$mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n\r\n}\r\nelse if($tipe == \"addassetform\")\r\n{\r\n \r\n    $statuspostingdate = \"no\";\r\n    $date1= date_create($_POST['postingdate']);\r\n   \r\n    $date2=date_create(date(\"Y-m-d\"));\r\n    $diff=date_diff($date1,$date2);\r\n    $perbedaan =  $diff->format(\"%m\");\r\n    if($perbedaan < 0)\r\n    {\r\n        $perbedaan = 0;\r\n    }\r\n    if(isset($_POST['statuspostingdate']))\r\n    {\r\n        $perbedaan+=1;\r\n        $statuspostingdate =  \"yes\";\r\n    }\r\n    $totalmonth = $perbedaan; \r\n    $noasset = $_POST['noasset'];\r\n    $assetname = $_POST['name'];\r\n    $group = $_POST['group'];\r\n    $initialcondition = $_POST['initialcondition'];\r\n    $subgroup = $_POST['subgroup'];\r\n    $condition = $_POST['condition'];\r\n    $category = $_POST['category'];\r\n    $nopo = $_POST['nopo'];\r\n    $relation = $_POST['relation'];\r\n    $postingdate = date_format(date_create($_POST['postingdate']), \"Y-m-d\");\r\n    $purchaseprice = $_POST['purchaseprice'];\r\n    $ppn = $_POST['ppn'];\r\n    $totalpurchaseprice = $_POST['totalpurchaseprice'];\r\n    $costpermonth = $_POST['costpermonth'];\r\n    $economicallifetime = $_POST['economicallifetime'];\r\n\r\n    $startwarranty = date_format(date_create($_POST['startwarranty']), \"Y-m-d\");\r\n    $endwarranty = date_format(date_create($_POST['endwarranty']), \"Y-m-d\");\r\n    $template = $_POST['template'];\r\n    \r\n    $mystartwarranty = NULL;\r\n    $myendwarranty = NULL;\r\n    $myfile = \"\";\r\n    if(isset($_POST['startwarranty']))\r\n    {\r\n        $mystartwarranty = $_POST['startwarranty'];\r\n    }\r\n    if(isset($_POST['endwarranty']))\r\n    {\r\n        $myendwarranty = $_POST['endwarranty'];\r\n    }\r\n    if(isset($_FILES['myfile']['tmp_name']))\r\n    {\r\n        if(!is_dir(\"../assets/attach/\")) {\r\n            mkdir(\"../assets/attach/\");\r\n        }\r\n        \r\n        // echo \"test\";\r\n        // echo count($_POST['myfile']);\r\n        $jumlah = count($_FILES['myfile']['tmp_name']);\r\n        for($i = 0 ; $i < $jumlah;$i++)\r\n        {\r\n            $filename = \"$noasset\".\"_\".date(\"Y_m_d_H_i_s\").\"_\".$_FILES['myfile']['name'][$i];\r\n            // $filename = $_FILES['myfile']['name'][$i];\r\n            if($i == 0 )\r\n            {\r\n                $myfile .= $filename;\r\n            }\r\n            else{\r\n                $myfile .= \",\".$filename;\r\n            }\r\n            move_uploaded_file($_FILES[\"myfile\"][\"tmp_name\"][$i], \"../assets/attach/\".$filename);\r\n       \r\n        }\r\n        // $file = $_FILES['myfile']['tmp_name'];\r\n    }\r\n    // echo $myfile;\r\n    $mysessionsistercompany = $_SESSION['idsister'];\r\n    $sql = \"INSERT into asset values(NULL, '$mysessionsistercompany', '$group', '$subgroup', '$category', '$initialcondition', \r\n    '$condition', '$template','$noasset', '$assetname','$nopo', '$relation', '$postingdate', '$statuspostingdate', '$totalmonth', '$purchaseprice', '$ppn', '$totalpurchaseprice',\r\n    '$economicallifetime', '$costpermonth', '$mystartwarranty', '$myendwarranty', '$myfile', 'Active')\";\r\n    $res = $conn->query($sql);\r\n    if(($conn -> affected_rows)>0)\r\n    {\r\n        $last_id = $conn->insert_id;\r\n        if($_POST['idcustomquestion']!=\"\" && $_POST['idcustomquestion']!=\"none\")\r\n        {\r\n            $splitidcustom = explode(',', $_POST['idcustomquestion']);\r\n            for($i = 0 ;$i < count($splitidcustom); $i++)\r\n            {\r\n                $currentid = $splitidcustom[$i];\r\n                $currentvalue = $_POST['custom'.$currentid];\r\n                $sqlinsertanswer = \"INSERT into custom_template_answer values(NULL, '$currentid', '$last_id' , '$currentvalue')\";\r\n                $resinsertanswer = $conn->query($sqlinsertanswer);\r\n            }\r\n        }\r\n        echo \"sukses\";\r\n\r\n    }\r\n    else{\r\n        echo \"tidak\";\r\n    }\r\n    \r\n\r\n\r\n}\r\nelse if($tipe == \"add\"){\r\n\r\n    $idsister = $myses;\r\n    $mygroup = $_POST['mygroup'];\r\n    $myasset = $_POST['myasset'];\r\n    $mybranch = $_POST['mybranch'];\r\n    $mydepartment = $_POST['mydepartment'];\r\n    $myfromroom = $_POST['myfromroom'];\r\n    $mytoroom = $_POST['mytoroom'];\r\n    $myremark = $_POST['myremark'];\r\n    date_default_timezone_set(\"Asia/Bangkok\");\r\n    $mydate = date(\"Y-m-d\");\r\n    $sql = \"INSERT INTO `transaction_displacement_department` VALUES (NULL, 'TRX---', '$idsister', '$mybranch', '$mygroup', '$myasset', '$mydepartment', '$myfromroom', '$mytoroom', '$myremark', 'pending', 'CURRENT_TIMESTAMP', '$mydate');\";\r\n    $res = $conn->query($sql);\r\n    if(($conn -> affected_rows)>0)\r\n    {\r\n        echo \"sukses\";\r\n    }\r\n    else{\r\n        echo \"tidak\";\r\n    }\r\n    // echo $sql;\r\n}\r\nelse if($tipe == \"changedata\")\r\n{\r\n    $id  = $_POST['myid'];\r\n    $idsister = $_SESSION['idsister'];\r\n    $group = $_POST['group'];\r\n    $subgroup = $_POST['subgroup'];\r\n    $category = $_POST['category'];\r\n    $initialcondition = $_POST['initialcondition'];\r\n    $condition = $_POST['condition'];\r\n    $noasset = $_POST['noasset'];\r\n    $name = $_POST['name'];\r\n    $sql = \"update asset set \r\n           idsistercompany = '\".$idsister.\"', \r\n           idgroup = '\".$group.\"', \r\n           idsubgroup = '\".$subgroup.\"',\r\n           idcategory = '\".$category.\"',\r\n           idinitialcondition = '\".$initialcondition.\"',\r\n           idcondition = '\".$condition.\"',\r\n           noasset = '\".$noasset.\"',\r\n           name = '\".$name.\"' \r\n            where id = '\".$id.\"'\";\r\n    $res = $conn->query($sql);\r\n    if(($conn -> affected_rows)>0)\r\n    {\r\n        echo \"sukses\";\r\n    }\r\n    else{\r\n        echo \"tidak\";\r\n    }\r\n}\r\nelse if($tipe == \"setstatus\")\r\n{\r\n    $myid = $_POST['myidchange'];\r\n    $stat = $_POST['stat'];\r\n    $sql = \"update asset set status = '\".$stat.\"' where id = '\".$myid.\"'\";\r\n    $res = $conn->query($sql);\r\n}\r\nelse if($tipe == \"getassetdesc\")\r\n{\r\n    $assetid = $_POST['assetid'];\r\n    $sql = \"select asset.id, asset.noasset, asset.name, c.name as conditions, ic.initial_condition from asset\r\n     inner join conditions c on c.id = asset.idcondition \r\n    inner join initial_condition ic on ic.id = asset.idinitialcondition where asset.id = '$assetid'\";\r\n    $res = $conn->query($sql);\r\n    $row = mysqli_fetch_array($res);\r\n    \r\n    $mystring = $row['noasset'].\"~~\".$row['name'].\"~~\".$row['conditions'].\"~~\".$row['initial_condition'];\r\n    echo $mystring;\r\n}\r\nelse if($tipe == \"getassetlist\")\r\n{\r\n    $idgroup = $_POST['idgroup'];\r\n    $sql = \"select asset.id, asset.noasset, asset.name from asset where asset.idgroup = '$idgroup' and asset.idsistercompany = '$myses'\";\r\n    $res = $conn->query($sql);\r\n    // $row = mysqli_fetch_array($res);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['id'].\"'> \".$r['noasset'].\"-\".$r['name'].\"</option>\";\r\n        }\r\n    }\r\n    echo $mystring;\r\n}\r\nelse if($tipe == \"getroom\")\r\n{\r\n    $idbranch = $_POST['idbranch'];\r\n    $sql = \"SELECT lroom.* FROM location_room lroom \r\n    inner join location_setup_building_floor lsbf on lsbf.idlocationsetupbuildingfloor = lroom.idsetupbuildingfloor\r\n    inner join location_building lbuilding on lbuilding.id = lsbf.idbuilding\r\n    inner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lbuilding.idsetupsisterbranch\r\n    inner join location_branch lbranch on lbranch.idbranch = lssb.idbranch\r\n    where lbranch.idbranch = '$idbranch'\";\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['id'].\"'> \".$r['room'].\"</option>\";\r\n        }\r\n    }\r\n    echo $mystring;\r\n}\r\n?>"
        }
    ]
}