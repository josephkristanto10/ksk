{
    "sourceFile": "process/masterfloor.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 24,
            "patches": [
                {
                    "date": 1630309255667,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1630309447753,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,13 +21,9 @@\n     $dir      = $response['order'][0]['dir'];\r\n     $search   = $response['search']['value'];\r\n     \r\n     $total_data = mysqli_query($conn, \r\n-    \"select lb.id, lb.idsetupsisterbranch ,  lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n-    inner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n-    inner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n-    inner join location_branch lbranch on lbranch.idbranch = lssb.idbranch\r\n-    \"\r\n+    \"select * from floor\"\r\n );\r\n     \r\n     if(empty($search)) {\r\n         $query_data = mysqli_query($conn, \"select lb.id, lb.idsetupsisterbranch ,  lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n"
                },
                {
                    "date": 1630309457051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,11 +20,9 @@\n     $order    = $where_like[$response['order'][0]['column']];\r\n     $dir      = $response['order'][0]['dir'];\r\n     $search   = $response['search']['value'];\r\n     \r\n-    $total_data = mysqli_query($conn, \r\n-    \"select * from floor\"\r\n-);\r\n+    $total_data = mysqli_query($conn,\"select * from floor\");\r\n     \r\n     if(empty($search)) {\r\n         $query_data = mysqli_query($conn, \"select lb.id, lb.idsetupsisterbranch ,  lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n \t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n"
                },
                {
                    "date": 1630309462427,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,12 +23,9 @@\n     \r\n     $total_data = mysqli_query($conn,\"select * from floor\");\r\n     \r\n     if(empty($search)) {\r\n-        $query_data = mysqli_query($conn, \"select lb.id, lb.idsetupsisterbranch ,  lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n-\t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n-\t\tinner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n-\t\tinner join location_branch lbranch on lbranch.idbranch = lssb.idbranch  ORDER BY $order $dir LIMIT $start, $length\");\r\n+        $query_data = mysqli_query($conn, \"select * from floor  ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n         $total_filtered = mysqli_query($conn, \"select lb.id, lb.idsetupsisterbranch , lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n \t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n \t\tinner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n"
                },
                {
                    "date": 1630309467609,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,12 +25,9 @@\n     \r\n     if(empty($search)) {\r\n         $query_data = mysqli_query($conn, \"select * from floor  ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"select lb.id, lb.idsetupsisterbranch , lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n-\t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n-\t\tinner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n-\t\tinner join location_branch lbranch on lbranch.idbranch = lssb.idbranch \");\r\n+        $total_filtered = mysqli_query($conn, \"select * from floor \");\r\n \r\n     } else {\r\n         $query_data = mysqli_query($conn, \"select lb.id, lb.idsetupsisterbranch , lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n \t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n"
                },
                {
                    "date": 1630309503218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,16 +28,12 @@\n     \r\n         $total_filtered = mysqli_query($conn, \"select * from floor \");\r\n \r\n     } else {\r\n-        $query_data = mysqli_query($conn, \"select lb.id, lb.idsetupsisterbranch , lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n-\t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n-\t\tinner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n-\t\tinner join location_branch lbranch on lbranch.idbranch = lssb.idbranch\r\n-        WHERE lb.code LIKE '%$search%' \r\n-        OR lb.buildingname LIKE '%$search%'\r\n-        OR lsc.name LIKE '%$search%'\r\n-        OR lbranch.branch LIKE '%$search%'\r\n+        $query_data = mysqli_query($conn, \"select * from floor\r\n+        WHERE code LIKE '%$search%' \r\n+        OR floor LIKE '%$search%'\r\n+        OR description LIKE '%$search%'\r\n         OR lb.status LIKE '%$search%'\r\n         ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n         $total_filtered = mysqli_query($conn, \"select lb.id , lb.idsetupsisterbranch , lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n"
                },
                {
                    "date": 1630309514101,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,20 +32,16 @@\n         $query_data = mysqli_query($conn, \"select * from floor\r\n         WHERE code LIKE '%$search%' \r\n         OR floor LIKE '%$search%'\r\n         OR description LIKE '%$search%'\r\n-        OR lb.status LIKE '%$search%'\r\n+        OR status LIKE '%$search%'\r\n         ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"select lb.id , lb.idsetupsisterbranch , lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n-\t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n-\t\tinner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n-\t\tinner join location_branch lbranch on lbranch.idbranch = lssb.idbranch\r\n-        WHERE lb.code LIKE '%$search%' \r\n-        OR lb.buildingname LIKE '%$search%'\r\n-        OR lsc.name LIKE '%$search%'\r\n-        OR lbranch.branch LIKE '%$search%'\r\n-        OR lb.status LIKE '%$search%'\");\r\n+        $total_filtered = mysqli_query($conn, \"select * from floor\r\n+        WHERE code LIKE '%$search%' \r\n+        OR floor LIKE '%$search%'\r\n+        OR description LIKE '%$search%'\r\n+        OR status LIKE '%$search%'\");\r\n     }\r\n     \r\n     $response['data'] = [];\r\n     \r\n"
                },
                {
                    "date": 1630309524934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,9 +65,8 @@\n             \r\n             $response['data'][] = [\r\n                 \"-\",\r\n                 \"<label id ='code\".$row['id'].\"'>\".$row['code'].\"</label>\",\r\n-              \r\n                 \"<label id ='name\".$row['id'].\"'>\".$row['buildingname'].\"</label>\",\r\n                 \"<b>\".$row['name'].\"</b> <br><span class='badge badge-success'  style = 'background-color:#26a69a !important;font-size:12px;'>\".$row['branch'].\"</span>\",\r\n                 \"<label id ='description\".$row['id'].\"'>\".$row['description'].\"</label>\",\r\n                 \"<label id ='status\".$row['id'].\"'>\".$mystats.\"</label>\",\r\n"
                },
                {
                    "date": 1630309532430,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,9 +65,9 @@\n             \r\n             $response['data'][] = [\r\n                 \"-\",\r\n                 \"<label id ='code\".$row['id'].\"'>\".$row['code'].\"</label>\",\r\n-                \"<label id ='name\".$row['id'].\"'>\".$row['buildingname'].\"</label>\",\r\n+                \"<label id ='floor\".$row['id'].\"'>\".$row['floor'].\"</label>\",\r\n                 \"<b>\".$row['name'].\"</b> <br><span class='badge badge-success'  style = 'background-color:#26a69a !important;font-size:12px;'>\".$row['branch'].\"</span>\",\r\n                 \"<label id ='description\".$row['id'].\"'>\".$row['description'].\"</label>\",\r\n                 \"<label id ='status\".$row['id'].\"'>\".$mystats.\"</label>\",\r\n                 ' <div class=\"list-icons\">\r\n"
                },
                {
                    "date": 1630309537671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,9 +66,8 @@\n             $response['data'][] = [\r\n                 \"-\",\r\n                 \"<label id ='code\".$row['id'].\"'>\".$row['code'].\"</label>\",\r\n                 \"<label id ='floor\".$row['id'].\"'>\".$row['floor'].\"</label>\",\r\n-                \"<b>\".$row['name'].\"</b> <br><span class='badge badge-success'  style = 'background-color:#26a69a !important;font-size:12px;'>\".$row['branch'].\"</span>\",\r\n                 \"<label id ='description\".$row['id'].\"'>\".$row['description'].\"</label>\",\r\n                 \"<label id ='status\".$row['id'].\"'>\".$mystats.\"</label>\",\r\n                 ' <div class=\"list-icons\">\r\n                 <div class=\"dropdown\">\r\n"
                },
                {
                    "date": 1630309546854,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,9 +75,9 @@\n                         <i class=\"icon-menu9\"></i>\r\n                     </a>\r\n     \r\n                     <div class=\"dropdown-menu dropdown-menu-right\">\r\n-                        <a href=\"#myModaledit\" data-toggle=\"modal\" class=\"dropdown-item\" id =\"click-'.$row['id'].'-'.$row['idsetupsisterbranch'].'\"  onclick = \"openmodaledit(this)\"><i class=\"icon-check\"></i>\r\n+                        <a href=\"#myModaledit\" data-toggle=\"modal\" class=\"dropdown-item\" id =\"click-'.$row['id']\"  onclick = \"openmodaledit(this)\"><i class=\"icon-check\"></i>\r\n                             Edit</a>\r\n                         \r\n                         '.$myaction.'\r\n                    \r\n"
                },
                {
                    "date": 1630309555645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,9 +75,9 @@\n                         <i class=\"icon-menu9\"></i>\r\n                     </a>\r\n     \r\n                     <div class=\"dropdown-menu dropdown-menu-right\">\r\n-                        <a href=\"#myModaledit\" data-toggle=\"modal\" class=\"dropdown-item\" id =\"click-'.$row['id']\"  onclick = \"openmodaledit(this)\"><i class=\"icon-check\"></i>\r\n+                        <a href=\"#myModaledit\" data-toggle=\"modal\" class=\"dropdown-item\" id =\"click-'.$row['id'].'\"  onclick = \"openmodaledit(this)\"><i class=\"icon-check\"></i>\r\n                             Edit</a>\r\n                         \r\n                         '.$myaction.'\r\n                    \r\n"
                },
                {
                    "date": 1630309569845,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n {\r\n \r\n     $where_like = [\r\n         'code',\r\n-        'sistername',\r\n+        'floor',\r\n         'branch',\r\n         'telp',\r\n         'description',\r\n         'status'\r\n"
                },
                {
                    "date": 1630309576446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,10 +6,8 @@\n \r\n     $where_like = [\r\n         'code',\r\n         'floor',\r\n-        'branch',\r\n-        'telp',\r\n         'description',\r\n         'status'\r\n         \r\n     ];\r\n"
                },
                {
                    "date": 1630309658518,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,17 +18,17 @@\n     $order    = $where_like[$response['order'][0]['column']];\r\n     $dir      = $response['order'][0]['dir'];\r\n     $search   = $response['search']['value'];\r\n     \r\n-    $total_data = mysqli_query($conn,\"select * from floor\");\r\n+    $total_data = mysqli_query($conn,\"select * from location_floor\");\r\n     \r\n     if(empty($search)) {\r\n-        $query_data = mysqli_query($conn, \"select * from floor  ORDER BY $order $dir LIMIT $start, $length\");\r\n+        $query_data = mysqli_query($conn, \"select * from location_floor  ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"select * from floor \");\r\n+        $total_filtered = mysqli_query($conn, \"select * from location_floor \");\r\n \r\n     } else {\r\n-        $query_data = mysqli_query($conn, \"select * from floor\r\n+        $query_data = mysqli_query($conn, \"select * from location_floor\r\n         WHERE code LIKE '%$search%' \r\n         OR floor LIKE '%$search%'\r\n         OR description LIKE '%$search%'\r\n         OR status LIKE '%$search%'\r\n"
                },
                {
                    "date": 1630309664038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,16 +26,16 @@\n     \r\n         $total_filtered = mysqli_query($conn, \"select * from location_floor \");\r\n \r\n     } else {\r\n-        $query_data = mysqli_query($conn, \"select * from location_floor\r\n+        $query_data = mysqli_query($conn, \"select * from location_floor \r\n         WHERE code LIKE '%$search%' \r\n         OR floor LIKE '%$search%'\r\n         OR description LIKE '%$search%'\r\n         OR status LIKE '%$search%'\r\n         ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"select * from floor\r\n+        $total_filtered = mysqli_query($conn, \"select * from location_floor \r\n         WHERE code LIKE '%$search%' \r\n         OR floor LIKE '%$search%'\r\n         OR description LIKE '%$search%'\r\n         OR status LIKE '%$search%'\");\r\n"
                },
                {
                    "date": 1630309693978,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,9 +143,9 @@\n else if($tipe == \"setstatus\")\r\n {\r\n     $myid = $_POST['myidchange'];\r\n     $stat = $_POST['stat'];\r\n-    $sql = \"update location_building set status = '\".$stat.\"' where id = '\".$myid.\"'\";\r\n+    $sql = \"update location_floor set status = '\".$stat.\"' where id = '\".$myid.\"'\";\r\n     $res = $conn->query($sql);\r\n }\r\n else if($tipe == \"getprovince\")\r\n {\r\n"
                },
                {
                    "date": 1630310030028,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,9 +99,9 @@\n     echo json_encode($response);\r\n }\r\n else if($tipe == \"add\"){\r\n     $code = $_POST['code'];\r\n-    $name = $_POST['name'];\r\n+    $name = $_POST['floor'];\r\n     $location = $_POST['location'];\r\n     $desc = $_POST['desc'];\r\n \r\n \r\n"
                },
                {
                    "date": 1630310035442,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,8 @@\n }\r\n else if($tipe == \"add\"){\r\n     $code = $_POST['code'];\r\n     $name = $_POST['floor'];\r\n-    $location = $_POST['location'];\r\n     $desc = $_POST['desc'];\r\n \r\n \r\n     $sql = \"INSERT into location_building values(NULL,'-', '\".$code.\"', '\".$name.\"', '\".$location.\"', '\".$desc.\"', 'Active')\";\r\n"
                },
                {
                    "date": 1630310046922,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,13 +99,13 @@\n     echo json_encode($response);\r\n }\r\n else if($tipe == \"add\"){\r\n     $code = $_POST['code'];\r\n-    $name = $_POST['floor'];\r\n+    $floor = $_POST['floor'];\r\n     $desc = $_POST['desc'];\r\n \r\n \r\n-    $sql = \"INSERT into location_building values(NULL,'-', '\".$code.\"', '\".$name.\"', '\".$location.\"', '\".$desc.\"', 'Active')\";\r\n+    $sql = \"INSERT into location_building values(NULL,'-', '\".$code.\"', '\".$floot.\"', '\".$location.\"', '\".$desc.\"', 'Active')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1630310052993,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,9 +103,9 @@\n     $floor = $_POST['floor'];\r\n     $desc = $_POST['desc'];\r\n \r\n \r\n-    $sql = \"INSERT into location_building values(NULL,'-', '\".$code.\"', '\".$floot.\"', '\".$location.\"', '\".$desc.\"', 'Active')\";\r\n+    $sql = \"INSERT into location_building values(NULL,'-', '\".$code.\"', '\".$floor.$desc.\"', 'Active')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1630310061231,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,9 +103,9 @@\n     $floor = $_POST['floor'];\r\n     $desc = $_POST['desc'];\r\n \r\n \r\n-    $sql = \"INSERT into location_building values(NULL,'-', '\".$code.\"', '\".$floor.$desc.\"', 'Active')\";\r\n+    $sql = \"INSERT into location_building values(NULL,'-', '\".$code.\"', '\".$floor.\"', '\".$desc.\"', 'Active')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1630310520826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,9 +103,9 @@\n     $floor = $_POST['floor'];\r\n     $desc = $_POST['desc'];\r\n \r\n \r\n-    $sql = \"INSERT into location_building values(NULL,'-', '\".$code.\"', '\".$floor.\"', '\".$desc.\"', 'Active')\";\r\n+    $sql = \"INSERT into location_floor values(NULL,'-', '\".$code.\"', '\".$floor.\"', '\".$desc.\"', 'Active')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n@@ -121,9 +121,8 @@\n \r\n     $id  = $_POST['myid'];\r\n     $code = $_POST['mycode'];\r\n     $name = $_POST['myname'];\r\n-    $loc = $_POST['myloc'];\r\n     $desc = $_POST['mydesc'];\r\n     $sql = \"update location_building set \r\n            code = '\".$code.\"', \r\n            buildingname = '\".$name.\"', \r\n"
                },
                {
                    "date": 1630310528573,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -120,11 +120,11 @@\n \r\n \r\n     $id  = $_POST['myid'];\r\n     $code = $_POST['mycode'];\r\n-    $name = $_POST['myname'];\r\n+    $floor = $_POST['myfloor'];\r\n     $desc = $_POST['mydesc'];\r\n-    $sql = \"update location_building set \r\n+    $sql = \"update location_floor set \r\n            code = '\".$code.\"', \r\n            buildingname = '\".$name.\"', \r\n            idsetupsisterbranch = '\".$loc.\"',\r\n            description = '\".$desc.\"' \r\n"
                },
                {
                    "date": 1630310534347,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,10 +124,9 @@\n     $floor = $_POST['myfloor'];\r\n     $desc = $_POST['mydesc'];\r\n     $sql = \"update location_floor set \r\n            code = '\".$code.\"', \r\n-           buildingname = '\".$name.\"', \r\n-           idsetupsisterbranch = '\".$loc.\"',\r\n+           floor = '\".$floor.\"', \r\n            description = '\".$desc.\"' \r\n             where id = '\".$id.\"'\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n"
                }
            ],
            "date": 1630309255667,
            "name": "Commit-0",
            "content": "<?php\r\nrequire '../connection.php';\r\n$tipe = $_POST['tipe'];\r\nif($tipe == \"load\")\r\n{\r\n\r\n    $where_like = [\r\n        'code',\r\n        'sistername',\r\n        'branch',\r\n        'telp',\r\n        'description',\r\n        'status'\r\n        \r\n    ];\r\n    \r\n    $response = $_REQUEST;\r\n    $start    = $response['start'];\r\n    $length   = $response['length'];\r\n    $order    = $where_like[$response['order'][0]['column']];\r\n    $dir      = $response['order'][0]['dir'];\r\n    $search   = $response['search']['value'];\r\n    \r\n    $total_data = mysqli_query($conn, \r\n    \"select lb.id, lb.idsetupsisterbranch ,  lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n    inner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n    inner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n    inner join location_branch lbranch on lbranch.idbranch = lssb.idbranch\r\n    \"\r\n);\r\n    \r\n    if(empty($search)) {\r\n        $query_data = mysqli_query($conn, \"select lb.id, lb.idsetupsisterbranch ,  lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n\t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n\t\tinner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n\t\tinner join location_branch lbranch on lbranch.idbranch = lssb.idbranch  ORDER BY $order $dir LIMIT $start, $length\");\r\n    \r\n        $total_filtered = mysqli_query($conn, \"select lb.id, lb.idsetupsisterbranch , lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n\t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n\t\tinner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n\t\tinner join location_branch lbranch on lbranch.idbranch = lssb.idbranch \");\r\n\r\n    } else {\r\n        $query_data = mysqli_query($conn, \"select lb.id, lb.idsetupsisterbranch , lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n\t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n\t\tinner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n\t\tinner join location_branch lbranch on lbranch.idbranch = lssb.idbranch\r\n        WHERE lb.code LIKE '%$search%' \r\n        OR lb.buildingname LIKE '%$search%'\r\n        OR lsc.name LIKE '%$search%'\r\n        OR lbranch.branch LIKE '%$search%'\r\n        OR lb.status LIKE '%$search%'\r\n        ORDER BY $order $dir LIMIT $start, $length\");\r\n    \r\n        $total_filtered = mysqli_query($conn, \"select lb.id , lb.idsetupsisterbranch , lb.status, lb.code, lb.barcode, lb.buildingname, lb.description, lsc.name, lbranch.branch from location_building lb \r\n\t\tinner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = lb.idsetupsisterbranch \r\n\t\tinner join location_sister_company lsc on lsc.id = lssb.idsistercompany \r\n\t\tinner join location_branch lbranch on lbranch.idbranch = lssb.idbranch\r\n        WHERE lb.code LIKE '%$search%' \r\n        OR lb.buildingname LIKE '%$search%'\r\n        OR lsc.name LIKE '%$search%'\r\n        OR lbranch.branch LIKE '%$search%'\r\n        OR lb.status LIKE '%$search%'\");\r\n    }\r\n    \r\n    $response['data'] = [];\r\n    \r\n    if($query_data) {\r\n        while($row = mysqli_fetch_assoc($query_data)) {\r\n            $mystats = \"\";\r\n            if($row['status'] == \"Active\")\r\n            {\r\n                $myactionsetto = \"InActive\";\r\n                $mystats = '<span class=\"badge badge-success\">Active</span>';\r\n                $myaction = \"<a class='dropdown-item' onclick = setstatus('\".$row['id'].\"-\".$myactionsetto.\"')><i class='icon-check'></i>\r\n                Set InActive</a>'\";\r\n            }\r\n            else\r\n            {\r\n                $myactionsetto = \"Active\";\r\n                $mystats = '<span class=\"badge badge-danger\">InActive</span>';\r\n                $myaction = \"<a class='dropdown-item' onclick = setstatus('\".$row['id'].\"-\".$myactionsetto.\"')><i class='icon-check'></i>\r\n                Set Active</a>'\";\r\n            }\r\n            \r\n            $response['data'][] = [\r\n                \"-\",\r\n                \"<label id ='code\".$row['id'].\"'>\".$row['code'].\"</label>\",\r\n              \r\n                \"<label id ='name\".$row['id'].\"'>\".$row['buildingname'].\"</label>\",\r\n                \"<b>\".$row['name'].\"</b> <br><span class='badge badge-success'  style = 'background-color:#26a69a !important;font-size:12px;'>\".$row['branch'].\"</span>\",\r\n                \"<label id ='description\".$row['id'].\"'>\".$row['description'].\"</label>\",\r\n                \"<label id ='status\".$row['id'].\"'>\".$mystats.\"</label>\",\r\n                ' <div class=\"list-icons\">\r\n                <div class=\"dropdown\">\r\n                    <a href=\"#\" class=\"list-icons-item\" data-toggle=\"dropdown\">\r\n                        <i class=\"icon-menu9\"></i>\r\n                    </a>\r\n    \r\n                    <div class=\"dropdown-menu dropdown-menu-right\">\r\n                        <a href=\"#myModaledit\" data-toggle=\"modal\" class=\"dropdown-item\" id =\"click-'.$row['id'].'-'.$row['idsetupsisterbranch'].'\"  onclick = \"openmodaledit(this)\"><i class=\"icon-check\"></i>\r\n                            Edit</a>\r\n                        \r\n                        '.$myaction.'\r\n                   \r\n                    </div>\r\n                </div>\r\n            </div>'\r\n            ];\r\n        }\r\n    }\r\n    \r\n    $response['recordsTotal'] = 0;\r\n    if($total_data <> FALSE) {\r\n        $response['recordsTotal'] = mysqli_num_rows($total_data);\r\n    }\r\n    \r\n    $response['recordsFiltered'] = 0;\r\n    if($total_filtered <> FALSE) {\r\n        $response['recordsFiltered'] = mysqli_num_rows($total_filtered);\r\n    }  \r\n    \r\n    echo json_encode($response);\r\n}\r\nelse if($tipe == \"add\"){\r\n    $code = $_POST['code'];\r\n    $name = $_POST['name'];\r\n    $location = $_POST['location'];\r\n    $desc = $_POST['desc'];\r\n\r\n\r\n    $sql = \"INSERT into location_building values(NULL,'-', '\".$code.\"', '\".$name.\"', '\".$location.\"', '\".$desc.\"', 'Active')\";\r\n    $res = $conn->query($sql);\r\n    if(($conn -> affected_rows)>0)\r\n    {\r\n        echo \"sukses\";\r\n    }\r\n    else{\r\n        echo \"tidak\";\r\n    }\r\n    // echo $sql;\r\n}\r\nelse if($tipe == \"changedata\")\r\n{\r\n\r\n\r\n    $id  = $_POST['myid'];\r\n    $code = $_POST['mycode'];\r\n    $name = $_POST['myname'];\r\n    $loc = $_POST['myloc'];\r\n    $desc = $_POST['mydesc'];\r\n    $sql = \"update location_building set \r\n           code = '\".$code.\"', \r\n           buildingname = '\".$name.\"', \r\n           idsetupsisterbranch = '\".$loc.\"',\r\n           description = '\".$desc.\"' \r\n            where id = '\".$id.\"'\";\r\n    $res = $conn->query($sql);\r\n    if(($conn -> affected_rows)>0)\r\n    {\r\n        echo \"sukses\";\r\n    }\r\n    else{\r\n        echo \"tidak\";\r\n    }\r\n}\r\nelse if($tipe == \"setstatus\")\r\n{\r\n    $myid = $_POST['myidchange'];\r\n    $stat = $_POST['stat'];\r\n    $sql = \"update location_building set status = '\".$stat.\"' where id = '\".$myid.\"'\";\r\n    $res = $conn->query($sql);\r\n}\r\nelse if($tipe == \"getprovince\")\r\n{\r\n    $getid = $_POST['idcountry'];\r\n    $sql = \"select * from province where province.idcountry = '\".$getid.\"' and province.status = 'Active'\";\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['id'].\"' >\".$r['name'].\"</option>\";\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n}\r\nelse if($tipe == \"getcity\")\r\n{\r\n    $getid = $_POST['idprovince'];\r\n    $sql = \"select * from city where city.idprovince = '\".$getid.\"' and city.status = 'Active'\";\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['id'].\"' >\".$r['name'].\"</option>\";\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n}\r\nelse if($tipe == \"getdepartment\")\r\n{\r\n    $getid = $_POST['iddivisi'];\r\n    $sql = \"select *, department.id as iddepartment from department inner join divisi on divisi.id = department.iddivisi  where divisi.id = '\".$getid.\"' and department.status = 'Active'\";\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['iddepartment'].\"' >\".$r['department'].\"</option>\";\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n}\r\n?>"
        }
    ]
}