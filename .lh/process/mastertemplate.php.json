{
    "sourceFile": "process/mastertemplate.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 47,
            "patches": [
                {
                    "date": 1632055251340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1632055259634,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,45 +116,8 @@\n     }\r\n     // echo $sql;\r\n }\r\n else if()\r\n-else if($tipe == \"addsubrack\")\r\n-{\r\n-    $code = $_POST['mycode'];\r\n-    $rack = $_POST['myrack'];\r\n-    $splitter = explode(\"-\", $code);\r\n-    $sql = \"INSERT into subrack values(NULL,'\".$rack.\"', '\".$code.\"' , '\".$splitter[0].\"' ,'\".$splitter[1].\"' ,'\".$splitter[2].\"', 'Active')\";\r\n-    $res = $conn->query($sql);\r\n-    if(($conn -> affected_rows)>0)\r\n-    {\r\n-        echo \"sukses\";\r\n-    }\r\n-    else{\r\n-        echo \"tidak\";\r\n-    }\r\n-}\r\n-else if($tipe == \"loadsubrack\")\r\n-{\r\n-    // echo \"test\";\r\n-    // echo \"tests\";\r\n-    $rack = $_POST['myrack'];\r\n-    $sql = \"select * from subrack where idrack = '$rack'\";\r\n-    $res = $conn->query($sql);\r\n-    $mystring = \"\";\r\n-    if($res -> num_rows>0)\r\n-    {\r\n-        while($r = mysqli_fetch_array($res))\r\n-        {\r\n-            $mystring .= \"<tr><td style = 'line-height:0.25;' >\".$r['code'].\"</td><td>\".$r['subrackname'].\"</td><td>\".$r['rows'].\"</td><td>\".$r['colum'].\"</td><td>\".$r['status'].\"</td></tr>\";\r\n-        }\r\n-        echo $mystring;\r\n-    }\r\n-    else{\r\n-        echo \"none\";\r\n-    }\r\n-   \r\n-    \r\n-}\r\n else if($tipe == \"changedata\")\r\n {\t\t\r\n     $id  = $_POST['myid'];\r\n     $mycode = $_POST['mycode'];\r\n"
                },
                {
                    "date": 1632055358011,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,9 +115,9 @@\n         echo \"tidak\";\r\n     }\r\n     // echo $sql;\r\n }\r\n-else if()\r\n+\r\n else if($tipe == \"changedata\")\r\n {\t\t\r\n     $id  = $_POST['myid'];\r\n     $mycode = $_POST['mycode'];\r\n"
                },
                {
                    "date": 1632061564694,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,10 +97,10 @@\n }\r\n else if($tipe == \"add\"){\r\n \r\n \r\n-    $mycode = $_POST['mycode'];\r\n-    $mybranch = $_POST['mybranch'];\r\n+    $mycode = $_POST['mytemplate'];\r\n+    $mybranch = $_POST['myselected'];\r\n     $mybuilding = $_POST['mybuilding'];\r\n     $myfloor = $_POST['myfloor'];\r\n     $myrooms = $_POST['myrooms'];\r\n     $myrackname = $_POST['myrackname'];\r\n"
                },
                {
                    "date": 1632061573406,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,10 +97,10 @@\n }\r\n else if($tipe == \"add\"){\r\n \r\n \r\n-    $mycode = $_POST['mytemplate'];\r\n-    $mybranch = $_POST['myselected'];\r\n+    $mytemplate = $_POST['mytemplate'];\r\n+    $myselected = $_POST['myselected'];\r\n     $mybuilding = $_POST['mybuilding'];\r\n     $myfloor = $_POST['myfloor'];\r\n     $myrooms = $_POST['myrooms'];\r\n     $myrackname = $_POST['myrackname'];\r\n"
                },
                {
                    "date": 1632061588733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,13 +99,9 @@\n \r\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = $_POST['myselected'];\r\n-    $mybuilding = $_POST['mybuilding'];\r\n-    $myfloor = $_POST['myfloor'];\r\n-    $myrooms = $_POST['myrooms'];\r\n-    $myrackname = $_POST['myrackname'];\r\n-    $description = $_POST['mydescription'];\r\n+    \r\n     $sql = \"INSERT into rack values(NULL,'\".$mycode.\"', '\".$myses.\"' , '\".$mybranch.\"' ,'\".$mybuilding.\"' ,'\".$myfloor.\"', '\".$myrooms.\"' ,'\".$myrackname.\"' , '\".$description.\"', 'Active')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n"
                },
                {
                    "date": 1632061687625,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,9 @@\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = $_POST['myselected'];\r\n     \r\n-    $sql = \"INSERT into rack values(NULL,'\".$mycode.\"', '\".$myses.\"' , '\".$mybranch.\"' ,'\".$mybuilding.\"' ,'\".$myfloor.\"', '\".$myrooms.\"' ,'\".$myrackname.\"' , '\".$description.\"', 'Active')\";\r\n+    $sql = \"INSERT into rack values(NULL,'\".$mytemplate.\"', '\".$myses.\"' , '\".$mybranch.\"' ,'\".$mybuilding.\"' ,'\".$myfloor.\"', '\".$myrooms.\"' ,'\".$myrackname.\"' , '\".$description.\"', 'Active')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1632061693046,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,9 @@\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = $_POST['myselected'];\r\n     \r\n-    $sql = \"INSERT into rack values(NULL,'\".$mytemplate.\"', '\".$myses.\"' , '\".$mybranch.\"' ,'\".$mybuilding.\"' ,'\".$myfloor.\"', '\".$myrooms.\"' ,'\".$myrackname.\"' , '\".$description.\"', 'Active')\";\r\n+    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', '\".$myses.\"' , '\".$mybranch.\"' ,'\".$mybuilding.\"' ,'\".$myfloor.\"', '\".$myrooms.\"' ,'\".$myrackname.\"' , '\".$description.\"', 'Active')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1632061745648,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,9 @@\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = $_POST['myselected'];\r\n     \r\n-    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', '\".$myses.\"' , '\".$mybranch.\"' ,'\".$mybuilding.\"' ,'\".$myfloor.\"', '\".$myrooms.\"' ,'\".$myrackname.\"' , '\".$description.\"', 'Active')\";\r\n+    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', '\".$myses.\"' , '\".$mybranch.\"' ,'\".$mybuilding.\"' ,'\".$myfloor.\"', '\".$myrooms.\"' ,'\".$myrackname.\"' , '\".$description.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1632061803780,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,9 @@\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = $_POST['myselected'];\r\n     \r\n-    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', '\".$myses.\"' , '\".$mybranch.\"' ,'\".$mybuilding.\"' ,'\".$myfloor.\"', '\".$myrooms.\"' ,'\".$myrackname.\"' , '\".$description.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1632061857562,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,8 +105,9 @@\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n         echo \"sukses\";\r\n+        $idinsert = $mysqli -> insert_id;\r\n     }\r\n     else{\r\n         echo \"tidak\";\r\n     }\r\n"
                },
                {
                    "date": 1632061864802,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,10 +104,11 @@\n     $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n+    \r\n+        $idinsert = $mysqli -> insert_id;\r\n         echo \"sukses\";\r\n-        $idinsert = $mysqli -> insert_id;\r\n     }\r\n     else{\r\n         echo \"tidak\";\r\n     }\r\n"
                },
                {
                    "date": 1632061898189,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,8 +106,9 @@\n     if(($conn -> affected_rows)>0)\r\n     {\r\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n+        for($i = 0; $i<count($myselect))\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n         echo \"tidak\";\r\n"
                },
                {
                    "date": 1632061903306,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,9 +106,12 @@\n     if(($conn -> affected_rows)>0)\r\n     {\r\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n-        for($i = 0; $i<count($myselect))\r\n+        for($i = 0; $i<count($myselect);$i++)\r\n+        {\r\n+            \r\n+        }\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n         echo \"tidak\";\r\n"
                },
                {
                    "date": 1632061909602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,9 @@\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n         for($i = 0; $i<count($myselect);$i++)\r\n         {\r\n-            \r\n+            $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n         }\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n"
                },
                {
                    "date": 1632061919134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,9 @@\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n         for($i = 0; $i<count($myselect);$i++)\r\n         {\r\n-            $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+            $sql = \"INSERT into custom_filed values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n         }\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n"
                },
                {
                    "date": 1632061984407,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,9 @@\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n         for($i = 0; $i<count($myselect);$i++)\r\n         {\r\n-            $sql = \"INSERT into custom_filed values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+            $sql = \"INSERT into custom_to_template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n         }\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n"
                },
                {
                    "date": 1632061999114,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,9 @@\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n         for($i = 0; $i<count($myselect);$i++)\r\n         {\r\n-            $sql = \"INSERT into custom_to_template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+            $sql = \"INSERT into custom_to_template values(NULL,'\".$myselected.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n         }\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n"
                },
                {
                    "date": 1632062010184,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,11 +106,11 @@\n     if(($conn -> affected_rows)>0)\r\n     {\r\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n-        for($i = 0; $i<count($myselect);$i++)\r\n+        for($i = 0; $i<count($myselected);$i++)\r\n         {\r\n-            $sql = \"INSERT into custom_to_template values(NULL,'\".$myselected.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+            $sql = \"INSERT into custom_to_template values(NULL,'\".$myselected[$i].\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n         }\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n"
                },
                {
                    "date": 1632062023375,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,9 @@\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n         for($i = 0; $i<count($myselected);$i++)\r\n         {\r\n-            $sql = \"INSERT into custom_to_template values(NULL,'\".$myselected[$i].\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+            $sql = \"INSERT into custom_to_template values(NULL,'\"..\"','\".$myselected[$i].\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n         }\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n"
                },
                {
                    "date": 1632062030488,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,9 @@\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n         for($i = 0; $i<count($myselected);$i++)\r\n         {\r\n-            $sql = \"INSERT into custom_to_template values(NULL,'\"..\"','\".$myselected[$i].\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+            $sql = \"INSERT into custom_to_template values(NULL,'\".$idinsert.\"','\".$myselected[$i].\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n         }\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n"
                },
                {
                    "date": 1632062044653,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,9 @@\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n         for($i = 0; $i<count($myselected);$i++)\r\n         {\r\n-            $sql = \"INSERT into custom_to_template values(NULL,'\".$idinsert.\"','\".$myselected[$i].\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+            $sql = \"INSERT into custom_to_template values(NULL,'\".$idinsert.\"','\".$myselected[$i].\"')\";\r\n         }\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n"
                },
                {
                    "date": 1632062084775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,8 +109,9 @@\n         $idinsert = $mysqli -> insert_id;\r\n         for($i = 0; $i<count($myselected);$i++)\r\n         {\r\n             $sql = \"INSERT into custom_to_template values(NULL,'\".$idinsert.\"','\".$myselected[$i].\"')\";\r\n+            $ress = $conn->query($sql);\r\n         }\r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n"
                },
                {
                    "date": 1632062213083,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,9 +99,9 @@\n \r\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = $_POST['myselected'];\r\n-    \r\n+    echo $mytemplate.\"----\".;\r\n     $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n"
                },
                {
                    "date": 1632062267150,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,20 +99,24 @@\n \r\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = $_POST['myselected'];\r\n-    echo $mytemplate.\"----\".;\r\n+    echo $mytemplate.\"----\".$myselected;\r\n     $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n     \r\n         $idinsert = $mysqli -> insert_id;\r\n-        for($i = 0; $i<count($myselected);$i++)\r\n+        if(count($myselected>0))\r\n         {\r\n-            $sql = \"INSERT into custom_to_template values(NULL,'\".$idinsert.\"','\".$myselected[$i].\"')\";\r\n-            $ress = $conn->query($sql);\r\n+            for($i = 0; $i<count($myselected);$i++)\r\n+            {\r\n+                $sql = \"INSERT into custom_to_template values(NULL,'\".$idinsert.\"','\".$myselected[$i].\"')\";\r\n+                $ress = $conn->query($sql);\r\n+            }\r\n         }\r\n+      \r\n         echo \"sukses\";\r\n     }\r\n     else{\r\n         echo \"tidak\";\r\n"
                },
                {
                    "date": 1632062370763,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,9 +99,9 @@\n \r\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = $_POST['myselected'];\r\n-    echo $mytemplate.\"----\".$myselected;\r\n+    // echo $mytemplate.\"----\".$myselected;\r\n     $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n"
                },
                {
                    "date": 1632062410695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,8 +112,9 @@\n             for($i = 0; $i<count($myselected);$i++)\r\n             {\r\n                 $sql = \"INSERT into custom_to_template values(NULL,'\".$idinsert.\"','\".$myselected[$i].\"')\";\r\n                 $ress = $conn->query($sql);\r\n+                echo $sql;\r\n             }\r\n         }\r\n       \r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1632062455537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,9 +105,9 @@\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n     \r\n-        $idinsert = $mysqli -> insert_id;\r\n+        $idinsert = $conn->insert_id;\r\n         if(count($myselected>0))\r\n         {\r\n             for($i = 0; $i<count($myselected);$i++)\r\n             {\r\n"
                },
                {
                    "date": 1632062581637,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,8 +98,9 @@\n else if($tipe == \"add\"){\r\n \r\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n+    $myselected = \"\";\r\n     $myselected = $_POST['myselected'];\r\n     // echo $mytemplate.\"----\".$myselected;\r\n     $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n@@ -112,9 +113,9 @@\n             for($i = 0; $i<count($myselected);$i++)\r\n             {\r\n                 $sql = \"INSERT into custom_to_template values(NULL,'\".$idinsert.\"','\".$myselected[$i].\"')\";\r\n                 $ress = $conn->query($sql);\r\n-                echo $sql;\r\n+                // echo $sql;\r\n             }\r\n         }\r\n       \r\n         echo \"sukses\";\r\n"
                },
                {
                    "date": 1632062587535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,9 +98,9 @@\n else if($tipe == \"add\"){\r\n \r\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n-    $myselected = \"\";\r\n+    $myselected = array();\r\n     $myselected = $_POST['myselected'];\r\n     // echo $mytemplate.\"----\".$myselected;\r\n     $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n"
                },
                {
                    "date": 1632062602132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,9 +99,10 @@\n \r\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = array();\r\n-    $myselected = $_POST['myselected'];\r\n+    \r\n+    if(isset())$myselected = $_POST['myselected'];\r\n     // echo $mytemplate.\"----\".$myselected;\r\n     $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n"
                },
                {
                    "date": 1632062609044,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,11 @@\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = array();\r\n     \r\n-    if(isset())$myselected = $_POST['myselected'];\r\n+    if(isset($myselected))\r\n+    {\r\n+        $myselected = $_POST['myselected'];\r\n     // echo $mytemplate.\"----\".$myselected;\r\n     $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n"
                },
                {
                    "date": 1632062614232,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,8 +103,9 @@\n     \r\n     if(isset($myselected))\r\n     {\r\n         $myselected = $_POST['myselected'];\r\n+    }\r\n     // echo $mytemplate.\"----\".$myselected;\r\n     $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n"
                },
                {
                    "date": 1632062650439,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,9 @@\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = array();\r\n     \r\n-    if(isset($myselected))\r\n+    if(isset($$_POST['myselected']))\r\n     {\r\n         $myselected = $_POST['myselected'];\r\n     }\r\n     // echo $mytemplate.\"----\".$myselected;\r\n"
                },
                {
                    "date": 1632062703926,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,14 +100,14 @@\n \r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = array();\r\n     \r\n-    if(isset($$_POST['myselected']))\r\n+    if(isset($_POST['myselected']))\r\n     {\r\n         $myselected = $_POST['myselected'];\r\n     }\r\n     // echo $mytemplate.\"----\".$myselected;\r\n-    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', '1', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n     \r\n"
                },
                {
                    "date": 1632062717369,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,9 +96,9 @@\n     echo json_encode($response);\r\n }\r\n else if($tipe == \"add\"){\r\n \r\n-\r\n+    $sessionuser = \"1\";\r\n     $mytemplate = $_POST['mytemplate'];\r\n     $myselected = array();\r\n     \r\n     if(isset($_POST['myselected']))\r\n"
                },
                {
                    "date": 1632062724524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,9 +105,9 @@\n     {\r\n         $myselected = $_POST['myselected'];\r\n     }\r\n     // echo $mytemplate.\"----\".$myselected;\r\n-    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', '1', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', '\".$sessionuser.\"', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n     \r\n"
                },
                {
                    "date": 1632062794857,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,9 +105,9 @@\n     {\r\n         $myselected = $_POST['myselected'];\r\n     }\r\n     // echo $mytemplate.\"----\".$myselected;\r\n-    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', '\".$sessionuser.\"', 'CURRENT_TIMESTAMP', 'CURRENT_TIMESTAMP')\";\r\n+    $sql = \"INSERT into template values(NULL,'\".$mytemplate.\"', 'Active', '\".$sessionuser.\"', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)\";\r\n     $res = $conn->query($sql);\r\n     if(($conn -> affected_rows)>0)\r\n     {\r\n     \r\n"
                },
                {
                    "date": 1632062818559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,9 +111,9 @@\n     if(($conn -> affected_rows)>0)\r\n     {\r\n     \r\n         $idinsert = $conn->insert_id;\r\n-        if(count($myselected>0))\r\n+        if(isset($_POST['myselected']))\r\n         {\r\n             for($i = 0; $i<count($myselected);$i++)\r\n             {\r\n                 $sql = \"INSERT into custom_to_template values(NULL,'\".$idinsert.\"','\".$myselected[$i].\"')\";\r\n"
                },
                {
                    "date": 1632064623905,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n     $search   = $response['search']['value'];\r\n     $sessionidsister = $_SESSION['idsister'];\r\n     \r\n     $total_data = mysqli_query($conn, \r\n-    \"select * from template'\r\n+    \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id'\r\n     \"\r\n );\r\n     \r\n     if(empty($search)) {\r\n"
                },
                {
                    "date": 1632064630519,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,11 +26,11 @@\n     \"\r\n );\r\n     \r\n     if(empty($search)) {\r\n-        $query_data = mysqli_query($conn, \"select * from template ORDER BY $order $dir LIMIT $start, $length\");\r\n+        $query_data = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"select * from template\");\r\n+        $total_filtered = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id\");\r\n \r\n     } else {\r\n         $query_data = mysqli_query($conn, \"select * from template \r\n         where template.template LIKE '%$search%'  \r\n"
                },
                {
                    "date": 1632064636395,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n     \r\n         $total_filtered = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id\");\r\n \r\n     } else {\r\n-        $query_data = mysqli_query($conn, \"select * from template \r\n+        $query_data = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id \r\n         where template.template LIKE '%$search%'  \r\n         ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n         $total_filtered = mysqli_query($conn, \"select * from template \r\n"
                },
                {
                    "date": 1632064643824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,13 +31,13 @@\n     \r\n         $total_filtered = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id\");\r\n \r\n     } else {\r\n-        $query_data = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id \r\n+        $query_data = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id  \r\n         where template.template LIKE '%$search%'  \r\n         ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"select * from template \r\n+        $total_filtered = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id \r\n         where template.template LIKE '%$search%'  \");\r\n     }\r\n     \r\n     $response['data'] = [];\r\n"
                },
                {
                    "date": 1632064694353,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,8 +62,9 @@\n             \r\n             $response['data'][] = [\r\n            \r\n                 \"<label id ='template\".$row['id'].\"'>\".$row['template'].\"</label>\",\r\n+                \"<label id ='template\".$row['id'].\"'>\".$row['template'].\"</label>\",\r\n                 \"<label id ='status\".$row['id'].\"'>\".$mystats.\"</label>\",\r\n                 ' <div class=\"list-icons\">\r\n                 <div class=\"dropdown\">\r\n                     <a href=\"#\" class=\"list-icons-item\" data-toggle=\"dropdown\">\r\n"
                },
                {
                    "date": 1632064783686,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n     $search   = $response['search']['value'];\r\n     $sessionidsister = $_SESSION['idsister'];\r\n     \r\n     $total_data = mysqli_query($conn, \r\n-    \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id'\r\n+    \"select template.id, template.template, count(asset.id) as jumlahaset, template.status, template.created_by, template.created_at, template.updated_by from template left join asset on asset.idtemplate = template.id GROUP by  template.id'\r\n     \"\r\n );\r\n     \r\n     if(empty($search)) {\r\n@@ -62,9 +62,9 @@\n             \r\n             $response['data'][] = [\r\n            \r\n                 \"<label id ='template\".$row['id'].\"'>\".$row['template'].\"</label>\",\r\n-                \"<label id ='template\".$row['id'].\"'>\".$row['template'].\"</label>\",\r\n+                \"<label id ='template\".$row['id'].\"'>\".$row['jumlahaset'].\"</label>\",\r\n                 \"<label id ='status\".$row['id'].\"'>\".$mystats.\"</label>\",\r\n                 ' <div class=\"list-icons\">\r\n                 <div class=\"dropdown\">\r\n                     <a href=\"#\" class=\"list-icons-item\" data-toggle=\"dropdown\">\r\n"
                },
                {
                    "date": 1632064789566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n     \"\r\n );\r\n     \r\n     if(empty($search)) {\r\n-        $query_data = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id ORDER BY $order $dir LIMIT $start, $length\");\r\n+        $query_data = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset, template.status, template.created_by, template.created_at, template.updated_by from template left join asset on asset.idtemplate = template.id GROUP by  template.id ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n         $total_filtered = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id\");\r\n \r\n     } else {\r\n"
                },
                {
                    "date": 1632064797241,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,12 +28,12 @@\n     \r\n     if(empty($search)) {\r\n         $query_data = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset, template.status, template.created_by, template.created_at, template.updated_by from template left join asset on asset.idtemplate = template.id GROUP by  template.id ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id\");\r\n+        $total_filtered = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset, template.status, template.created_by, template.created_at, template.updated_by from template left join asset on asset.idtemplate = template.id GROUP by  template.id\");\r\n \r\n     } else {\r\n-        $query_data = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id  \r\n+        $query_data = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset, template.status, template.created_by, template.created_at, template.updated_by from template left join asset on asset.idtemplate = template.id GROUP by  template.id   \r\n         where template.template LIKE '%$search%'  \r\n         ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n         $total_filtered = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id \r\n"
                },
                {
                    "date": 1632064805281,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,9 @@\n         $query_data = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset, template.status, template.created_by, template.created_at, template.updated_by from template left join asset on asset.idtemplate = template.id GROUP by  template.id   \r\n         where template.template LIKE '%$search%'  \r\n         ORDER BY $order $dir LIMIT $start, $length\");\r\n     \r\n-        $total_filtered = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset from template left join asset on asset.idtemplate = template.id GROUP by  template.id \r\n+        $total_filtered = mysqli_query($conn, \"select template.id, template.template, count(asset.id) as jumlahaset, template.status, template.created_by, template.created_at, template.updated_by from template left join asset on asset.idtemplate = template.id GROUP by  template.id  \r\n         where template.template LIKE '%$search%'  \");\r\n     }\r\n     \r\n     $response['data'] = [];\r\n"
                }
            ],
            "date": 1632055251340,
            "name": "Commit-0",
            "content": "<?php\r\nrequire '../connection.php';\r\nsession_start();\r\n$myses = $_SESSION['idsister'];\r\n$mysesname = $_SESSION['namasister'];\r\n$tipe = $_POST['tipe'];\r\nif($tipe == \"load\")\r\n{\r\n\r\n    $where_like = [\r\n        'template',\r\n        'status'\r\n        \r\n    ];\r\n    \r\n    $response = $_REQUEST;\r\n    $start    = $response['start'];\r\n    $length   = $response['length'];\r\n    $order    = $where_like[$response['order'][0]['column']];\r\n    $dir      = $response['order'][0]['dir'];\r\n    $search   = $response['search']['value'];\r\n    $sessionidsister = $_SESSION['idsister'];\r\n    \r\n    $total_data = mysqli_query($conn, \r\n    \"select * from template'\r\n    \"\r\n);\r\n    \r\n    if(empty($search)) {\r\n        $query_data = mysqli_query($conn, \"select * from template ORDER BY $order $dir LIMIT $start, $length\");\r\n    \r\n        $total_filtered = mysqli_query($conn, \"select * from template\");\r\n\r\n    } else {\r\n        $query_data = mysqli_query($conn, \"select * from template \r\n        where template.template LIKE '%$search%'  \r\n        ORDER BY $order $dir LIMIT $start, $length\");\r\n    \r\n        $total_filtered = mysqli_query($conn, \"select * from template \r\n        where template.template LIKE '%$search%'  \");\r\n    }\r\n    \r\n    $response['data'] = [];\r\n    \r\n    if($query_data) {\r\n        while($row = mysqli_fetch_assoc($query_data)) {\r\n            $mystats = \"\";\r\n            if($row['status'] == \"Active\")\r\n            {\r\n                $myactionsetto = \"InActive\";\r\n                $mystats = '<span class=\"badge badge-success\">Active</span>';\r\n                $myaction = \"<a class='dropdown-item' onclick = setstatus('\".$row['id'].\"-\".$myactionsetto.\"')><i class='icon-check'></i>\r\n                Set InActive</a>'\";\r\n            }\r\n            else\r\n            {\r\n                $myactionsetto = \"Active\";\r\n                $mystats = '<span class=\"badge badge-danger\">InActive</span>';\r\n                $myaction = \"<a class='dropdown-item' onclick = setstatus('\".$row['id'].\"-\".$myactionsetto.\"')><i class='icon-check'></i>\r\n                Set Active</a>'\";\r\n            }\r\n            \r\n            $response['data'][] = [\r\n           \r\n                \"<label id ='template\".$row['id'].\"'>\".$row['template'].\"</label>\",\r\n                \"<label id ='status\".$row['id'].\"'>\".$mystats.\"</label>\",\r\n                ' <div class=\"list-icons\">\r\n                <div class=\"dropdown\">\r\n                    <a href=\"#\" class=\"list-icons-item\" data-toggle=\"dropdown\">\r\n                        <i class=\"icon-menu9\"></i>\r\n                    </a>\r\n    \r\n                    <div class=\"dropdown-menu dropdown-menu-right\">\r\n                        <a href=\"#myModaledit\" data-toggle=\"modal\" class=\"dropdown-item\" id =\"click-'.$row['id'].'\"  onclick = \"openmodaledit(this)\"><i class=\"icon-check\"></i>\r\n                            Edit</a>\r\n                        \r\n                        '.$myaction.'\r\n                   \r\n                    </div>\r\n                </div>\r\n            </div>'\r\n            ];\r\n        }\r\n    }\r\n    \r\n    $response['recordsTotal'] = 0;\r\n    if($total_data <> FALSE) {\r\n        $response['recordsTotal'] = mysqli_num_rows($total_data);\r\n    }\r\n    \r\n    $response['recordsFiltered'] = 0;\r\n    if($total_filtered <> FALSE) {\r\n        $response['recordsFiltered'] = mysqli_num_rows($total_filtered);\r\n    }  \r\n    \r\n    echo json_encode($response);\r\n}\r\nelse if($tipe == \"add\"){\r\n\r\n\r\n    $mycode = $_POST['mycode'];\r\n    $mybranch = $_POST['mybranch'];\r\n    $mybuilding = $_POST['mybuilding'];\r\n    $myfloor = $_POST['myfloor'];\r\n    $myrooms = $_POST['myrooms'];\r\n    $myrackname = $_POST['myrackname'];\r\n    $description = $_POST['mydescription'];\r\n    $sql = \"INSERT into rack values(NULL,'\".$mycode.\"', '\".$myses.\"' , '\".$mybranch.\"' ,'\".$mybuilding.\"' ,'\".$myfloor.\"', '\".$myrooms.\"' ,'\".$myrackname.\"' , '\".$description.\"', 'Active')\";\r\n    $res = $conn->query($sql);\r\n    if(($conn -> affected_rows)>0)\r\n    {\r\n        echo \"sukses\";\r\n    }\r\n    else{\r\n        echo \"tidak\";\r\n    }\r\n    // echo $sql;\r\n}\r\nelse if()\r\nelse if($tipe == \"addsubrack\")\r\n{\r\n    $code = $_POST['mycode'];\r\n    $rack = $_POST['myrack'];\r\n    $splitter = explode(\"-\", $code);\r\n    $sql = \"INSERT into subrack values(NULL,'\".$rack.\"', '\".$code.\"' , '\".$splitter[0].\"' ,'\".$splitter[1].\"' ,'\".$splitter[2].\"', 'Active')\";\r\n    $res = $conn->query($sql);\r\n    if(($conn -> affected_rows)>0)\r\n    {\r\n        echo \"sukses\";\r\n    }\r\n    else{\r\n        echo \"tidak\";\r\n    }\r\n}\r\nelse if($tipe == \"loadsubrack\")\r\n{\r\n    // echo \"test\";\r\n    // echo \"tests\";\r\n    $rack = $_POST['myrack'];\r\n    $sql = \"select * from subrack where idrack = '$rack'\";\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<tr><td style = 'line-height:0.25;' >\".$r['code'].\"</td><td>\".$r['subrackname'].\"</td><td>\".$r['rows'].\"</td><td>\".$r['colum'].\"</td><td>\".$r['status'].\"</td></tr>\";\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n   \r\n    \r\n}\r\nelse if($tipe == \"changedata\")\r\n{\t\t\r\n    $id  = $_POST['myid'];\r\n    $mycode = $_POST['mycode'];\r\n    $mybranch = $_POST['mybranch'];\r\n    $mybuilding = $_POST['mybuilding'];\r\n    $myfloor = $_POST['myfloor'];\r\n    $myrooms = $_POST['myrooms'];\r\n    $myrackname = $_POST['myrackname'];\r\n    $description = $_POST['mydescription'];\r\n    $sql = \"update rack set \r\n    idsistercompany = '\".$myses.\"', \r\n    idbranch = '\".$mybranch.\"', \r\n    idbuilding = '\".$mybuilding.\"', \r\n    idfloor = '\".$myfloor.\"', \r\n    idroom = '\".$myrooms.\"', \r\n    rackname = '\".$myrackname.\"', \r\n    description = '\".$description.\"'\r\n    where id = '\".$id.\"'\";\r\n    $res = $conn->query($sql);\r\n    if(($conn -> affected_rows)>0)\r\n    {\r\n        echo \"sukses\";\r\n    }\r\n    else{\r\n        echo \"tidak\";\r\n    }\r\n    // echo $sql;\r\n}\r\nelse if($tipe == \"setstatus\")\r\n{\r\n    $myid = $_POST['myidchange'];\r\n    $stat = $_POST['stat'];\r\n    $sql = \"update rack set status = '\".$stat.\"' where id = '\".$myid.\"'\";\r\n    $res = $conn->query($sql);\r\n}\r\nelse if($tipe == \"getbranch\")\r\n{\r\n    \r\n    $sql = 'SELECT lbranch.idbranch, lbranch.branch FROM `location_setup_sister_branch`\r\n            inner join location_branch lbranch on lbranch.idbranch = location_setup_sister_branch.idbranch where location_setup_sister_branch.idsistercompany = '.$myses;\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['idbranch'].\"' >\".$r['branch'].\"</option>\";\r\n        }\r\n        echo $mystring.\"|\".$mysesname;\r\n    }\r\n    else{\r\n        echo \"none\".\"|\".$mysesname;\r\n    }\r\n}\r\nelse if($tipe == \"getbuilding\")\r\n{\r\n    $myid = $_POST['idbranch'];\r\n    $sql = \"SELECT id, buildingname FROM `location_building` inner join location_setup_sister_branch lssb on lssb.idsetupsisterbranch = location_building.idsetupsisterbranch where lssb.idbranch = '\".$myid.\"' and lssb.idsistercompany = \".$myses;\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['id'].\"' >\".$r['buildingname'].\"</option>\";\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n}\r\nelse if($tipe == \"getfloor\")\r\n{\r\n    $mybranchid = $_POST['idbranch'];\r\n    $myid = $_POST['idbuilding'];\r\n    $sql = \"SELECT lfloor.floor, lfloor.id FROM location_setup_building_floor lsbf inner join location_floor lfloor on lfloor.id = lsbf.idfloor where lsbf.idbuilding = '$myid'\";\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['id'].\"' >\".$r['floor'].\"</option>\";\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n}\r\nelse if($tipe == \"getroom\"){\r\n    $mybranchid = $_POST['idbranch'];\r\n    $myidbuilding = $_POST['idbuilding'];\r\n    $myfloor = $_POST['idfloor'];\r\n    $sql = \"SELECT lroom.id, lroom.room FROM location_room lroom\r\n    inner join location_setup_building_floor lsbf on lsbf.idlocationsetupbuildingfloor = lroom.idsetupbuildingfloor\r\n    where lsbf.idbuilding  = '$myidbuilding' and lsbf.idfloor = '$myfloor'\";\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['id'].\"' >\".$r['room'].\"</option>\";\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n}\r\nelse if($tipe == \"getprovince\")\r\n{\r\n    $getid = $_POST['idcountry'];\r\n    $sql = \"select * from province where province.idcountry = '\".$getid.\"' and province.status = 'Active'\";\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['id'].\"' >\".$r['name'].\"</option>\";\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n}\r\nelse if($tipe == \"getcity\")\r\n{\r\n    $getid = $_POST['idprovince'];\r\n    $sql = \"select * from city where city.idprovince = '\".$getid.\"' and city.status = 'Active'\";\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['id'].\"' >\".$r['name'].\"</option>\";\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n}\r\nelse if($tipe == \"getdepartment\")\r\n{\r\n    $getid = $_POST['iddivisi'];\r\n    $sql = \"select *, department.id as iddepartment from department inner join divisi on divisi.id = department.iddivisi  where divisi.id = '\".$getid.\"' and department.status = 'Active'\";\r\n    $res = $conn->query($sql);\r\n    $mystring = \"\";\r\n    if($res -> num_rows>0)\r\n    {\r\n        while($r = mysqli_fetch_array($res))\r\n        {\r\n            $mystring .= \"<option value = '\".$r['iddepartment'].\"' >\".$r['department'].\"</option>\";\r\n        }\r\n        echo $mystring;\r\n    }\r\n    else{\r\n        echo \"none\";\r\n    }\r\n}\r\n?>"
        }
    ]
}