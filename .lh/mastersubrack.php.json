{
    "sourceFile": "mastersubrack.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 26,
            "patches": [
                {
                    "date": 1630984004146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1630984918995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -213,17 +213,18 @@\n             method: 'POST',\r\n             data: { tipe: \"load\"  }\r\n         },\r\n          columns: [\r\n-\t\t\t{ name: 'Code', className: 'text-center align-middle' },\r\n-            { name: 'Branch', className: 'text-center align-middle' },\r\n-            { name: 'Divisi', className: 'text-center align-middle' },\r\n-            { name: 'Department', className: 'text-center align-middle' },\r\n-\t\t\t{ name: 'Document', className: 'text-center align-middle' },\r\n-\t\t\t{ name: 'Date', className: 'text-center align-middle' },\r\n+            { name: 'branch', className: 'text-center align-middle' },\r\n+            { name: 'building', className: 'text-center align-middle' },\r\n+            { name: 'floor', className: 'text-center align-middle' },\r\n+            { name: 'room', className: 'text-center align-middle' },\r\n+\t\t\t{ name: 'rack', className: 'text-center align-middle' },\r\n+\t\t\t{ name: 'rackname', className: 'text-center align-middle' },\r\n \t\t\t{ name: 'Status', className: 'text-center align-middle' },\r\n             { name: 'Action', searchable: false, orderable: false, className: 'text-center align-middle' }\r\n             \r\n+            \r\n          ]\r\n       });\r\n    };\r\n \r\n"
                },
                {
                    "date": 1630984951367,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n \t\r\n \t\t<div class=\"content-wrapper\">\r\n \t\t\t<div class=\"page-header page-header-light\">\r\n \t\t\t\t<div class=\"page-header-content header-elements-md-inline\">\r\n-\t\t\t\t\t<h4><span class=\"font-weight-semibold\">Master Document</span></h4>\r\n+\t\t\t\t\t<h4><span class=\"font-weight-semibold\">Master Sub Rack</span></h4>\r\n \t\t\t\t\t<div class=\"page-title d-flex\">\r\n \t\t\t\t\t\t<div class=\"row\" style=\"width:100%;\">\r\n \t\t\t\t\t\t\t<div class=\"col-xl-12\">\r\n \t\t\t\t\t\t\t<a href=\"#myModal\" data-toggle=\"modal\"><button class=\"btn btn-info\" style=\"background-color:#26a69a !important;width:140px;\"><i\r\n"
                },
                {
                    "date": 1630984957164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n \t\t\t\t\t<div class=\"page-title d-flex\">\r\n \t\t\t\t\t\t<div class=\"row\" style=\"width:100%;\">\r\n \t\t\t\t\t\t\t<div class=\"col-xl-12\">\r\n \t\t\t\t\t\t\t<a href=\"#myModal\" data-toggle=\"modal\"><button class=\"btn btn-info\" style=\"background-color:#26a69a !important;width:140px;\"><i\r\n-\t\t\t\t\t\t\t\t\t\tclass=\"icon-add\"></i> &nbsp Add Document</button></a>\r\n+\t\t\t\t\t\t\t\t\t\tclass=\"icon-add\"></i> &nbsp Add Sub Rack</button></a>\r\n \t\t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t<a href=\"#\" class=\"header-elements-toggle text-default d-md-none\"><i class=\"icon-more\"></i></a>\r\n \t\t\t\t\t</div>\r\n"
                },
                {
                    "date": 1630985018581,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,11 +50,10 @@\n \t\t\t\t\t\t<div class=\"card\">\r\n \t\t\t\t\t\t<table id = \"datatable_serverside\" class=\"table table-hover table-bordered display nowrap w-100\">\r\n \t\t\t\t\t\t\t\t<thead>\r\n \t\t\t\t\t\t\t\t\t<tr>\r\n-\t\t\t\t\t\t\t\t\t\t<th>Code</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Branch</th>\r\n-\t\t\t\t\t\t\t\t\t\t<th>Division</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>B</th>\r\n                                         <th>Department</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Document</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Document Date</th>\r\n \t\t\t\t\t\t\t\t\t\t<th class=\"text-center\">Status</th>\r\n"
                },
                {
                    "date": 1630985024856,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,11 +51,11 @@\n \t\t\t\t\t\t<table id = \"datatable_serverside\" class=\"table table-hover table-bordered display nowrap w-100\">\r\n \t\t\t\t\t\t\t\t<thead>\r\n \t\t\t\t\t\t\t\t\t<tr>\r\n \t\t\t\t\t\t\t\t\t\t<th>Branch</th>\r\n-\t\t\t\t\t\t\t\t\t\t<th>B</th>\r\n-                                        <th>Department</th>\r\n-\t\t\t\t\t\t\t\t\t\t<th>Document</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>Building</th>\r\n+                                        <th>Floor</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>Rooms</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Document Date</th>\r\n \t\t\t\t\t\t\t\t\t\t<th class=\"text-center\">Status</th>\r\n \t\t\t\t\t\t\t\t\t\t<th class=\"text-center\">Action</th>\r\n \t\t\t\t\t\t\t\t\t</tr>\r\n"
                },
                {
                    "date": 1630985032011,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,10 @@\n \t\t\t\t\t\t\t\t\t\t<th>Branch</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Building</th>\r\n                                         <th>Floor</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Rooms</th>\r\n-\t\t\t\t\t\t\t\t\t\t<th>Document Date</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>Rack</th>\r\n+                                        <th>Rack</th>\r\n \t\t\t\t\t\t\t\t\t\t<th class=\"text-center\">Status</th>\r\n \t\t\t\t\t\t\t\t\t\t<th class=\"text-center\">Action</th>\r\n \t\t\t\t\t\t\t\t\t</tr>\r\n \t\t\t\t\t\t\t\t</thead>\r\n"
                },
                {
                    "date": 1630985683849,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,14 +50,15 @@\n \t\t\t\t\t\t<div class=\"card\">\r\n \t\t\t\t\t\t<table id = \"datatable_serverside\" class=\"table table-hover table-bordered display nowrap w-100\">\r\n \t\t\t\t\t\t\t\t<thead>\r\n \t\t\t\t\t\t\t\t\t<tr>\r\n+                                    <th>Branch</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Branch</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Building</th>\r\n                                         <th>Floor</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Rooms</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Rack</th>\r\n-                                        <th>Rack</th>\r\n+                                        <th>Sub Rack Name</th>\r\n \t\t\t\t\t\t\t\t\t\t<th class=\"text-center\">Status</th>\r\n \t\t\t\t\t\t\t\t\t\t<th class=\"text-center\">Action</th>\r\n \t\t\t\t\t\t\t\t\t</tr>\r\n \t\t\t\t\t\t\t\t</thead>\r\n"
                },
                {
                    "date": 1630985910516,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,9 @@\n \t\t\t\t\t\t<div class=\"card\">\r\n \t\t\t\t\t\t<table id = \"datatable_serverside\" class=\"table table-hover table-bordered display nowrap w-100\">\r\n \t\t\t\t\t\t\t\t<thead>\r\n \t\t\t\t\t\t\t\t\t<tr>\r\n-                                    <th>Branch</th>\r\n+                                        <th>Code</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Branch</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Building</th>\r\n                                         <th>Floor</th>\r\n \t\t\t\t\t\t\t\t\t\t<th>Rooms</th>\r\n"
                },
                {
                    "date": 1630986195661,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -215,8 +215,9 @@\n             data: { tipe: \"load\"  }\r\n         },\r\n          columns: [\r\n             { name: 'branch', className: 'text-center align-middle' },\r\n+            { name: 'branch', className: 'text-center align-middle' },\r\n             { name: 'building', className: 'text-center align-middle' },\r\n             { name: 'floor', className: 'text-center align-middle' },\r\n             { name: 'room', className: 'text-center align-middle' },\r\n \t\t\t{ name: 'rack', className: 'text-center align-middle' },\r\n"
                },
                {
                    "date": 1630994654749,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -214,10 +214,11 @@\n             method: 'POST',\r\n             data: { tipe: \"load\"  }\r\n         },\r\n          columns: [\r\n+             \r\n+            { name: 'code', className: 'text-center align-middle' },\r\n             { name: 'branch', className: 'text-center align-middle' },\r\n-            { name: 'branch', className: 'text-center align-middle' },\r\n             { name: 'building', className: 'text-center align-middle' },\r\n             { name: 'floor', className: 'text-center align-middle' },\r\n             { name: 'room', className: 'text-center align-middle' },\r\n \t\t\t{ name: 'rack', className: 'text-center align-middle' },\r\n"
                },
                {
                    "date": 1630995119499,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n \t}\r\n }\r\n \r\n ?>\r\n-\r\n+<head></head>\r\n \t<!-- Main navbar -->\r\n \t\r\n \t\r\n \t\t<div class=\"content-wrapper\">\r\n"
                },
                {
                    "date": 1630995130868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,11 @@\n \t}\r\n }\r\n \r\n ?>\r\n-<head></head>\r\n+<head>\r\n+    <style></style>\r\n+</head>\r\n \t<!-- Main navbar -->\r\n \t\r\n \t\r\n \t\t<div class=\"content-wrapper\">\r\n"
                },
                {
                    "date": 1630995136558,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,17 @@\n }\r\n \r\n ?>\r\n <head>\r\n-    <style></style>\r\n+    <style>\r\n+        td.details-control {\r\n+    background: url('../resources/details_open.png') no-repeat center center;\r\n+    cursor: pointer;\r\n+}\r\n+tr.details td.details-control {\r\n+    background: url('../resources/details_close.png') no-repeat center center;\r\n+}\r\n+    </style>\r\n </head>\r\n \t<!-- Main navbar -->\r\n \t\r\n \t\r\n"
                },
                {
                    "date": 1630995179377,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -240,8 +240,10 @@\n          ]\r\n       });\r\n    };\r\n \r\n+   var detailRows = [];\r\n+\r\n    // Reload table\r\n    function success() {\r\n       $('#datatable_serverside').DataTable().ajax.reload(null, false);\r\n    };\r\n"
                },
                {
                    "date": 1630995186468,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -242,8 +242,30 @@\n    };\r\n \r\n    var detailRows = [];\r\n \r\n+   $('#example tbody').on( 'click', 'tr td.details-control', function () {\r\n+        var tr = $(this).closest('tr');\r\n+        var row = dt.row( tr );\r\n+        var idx = $.inArray( tr.attr('id'), detailRows );\r\n+ \r\n+        if ( row.child.isShown() ) {\r\n+            tr.removeClass( 'details' );\r\n+            row.child.hide();\r\n+ \r\n+            // Remove from the 'open' array\r\n+            detailRows.splice( idx, 1 );\r\n+        }\r\n+        else {\r\n+            tr.addClass( 'details' );\r\n+            row.child( format( row.data() ) ).show();\r\n+ \r\n+            // Add to the 'open' array\r\n+            if ( idx === -1 ) {\r\n+                detailRows.push( tr.attr('id') );\r\n+            }\r\n+        }\r\n+\r\n    // Reload table\r\n    function success() {\r\n       $('#datatable_serverside').DataTable().ajax.reload(null, false);\r\n    };\r\n"
                },
                {
                    "date": 1630995195118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -242,9 +242,9 @@\n    };\r\n \r\n    var detailRows = [];\r\n \r\n-   $('#example tbody').on( 'click', 'tr td.details-control', function () {\r\n+   $('#datatable_serverside tbody').on( 'click', 'tr td.details-control', function () {\r\n         var tr = $(this).closest('tr');\r\n         var row = dt.row( tr );\r\n         var idx = $.inArray( tr.attr('id'), detailRows );\r\n  \r\n"
                },
                {
                    "date": 1630995207052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -263,9 +263,9 @@\n             if ( idx === -1 ) {\r\n                 detailRows.push( tr.attr('id') );\r\n             }\r\n         }\r\n-\r\n+    } );\r\n    // Reload table\r\n    function success() {\r\n       $('#datatable_serverside').DataTable().ajax.reload(null, false);\r\n    };\r\n"
                },
                {
                    "date": 1630995226881,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -264,8 +264,14 @@\n                 detailRows.push( tr.attr('id') );\r\n             }\r\n         }\r\n     } );\r\n+\r\n+    dt.on( 'draw', function () {\r\n+        $.each( detailRows, function ( i, id ) {\r\n+            $('#'+id+' td.details-control').trigger( 'click' );\r\n+        } );\r\n+    } );\r\n    // Reload table\r\n    function success() {\r\n       $('#datatable_serverside').DataTable().ajax.reload(null, false);\r\n    };\r\n"
                },
                {
                    "date": 1630995272414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -209,8 +209,9 @@\n         format: 'yyyy-mm-dd'\r\n       });\r\n       \r\n    });\r\n+   var dt = \"\";\r\n \tfunction loadData() {\r\n       $(\"#datatable_serverside\").DataTable({\r\n          processing: true,\r\n          deferRender: true,\r\n"
                },
                {
                    "date": 1630995905488,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -211,9 +211,9 @@\n       \r\n    });\r\n    var dt = \"\";\r\n \tfunction loadData() {\r\n-      $(\"#datatable_serverside\").DataTable({\r\n+        dt =  $(\"#datatable_serverside\").DataTable({\r\n          processing: true,\r\n          deferRender: true,\r\n          serverSide: true,\r\n          destroy: true,\r\n"
                },
                {
                    "date": 1630995930417,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n     background: url('../resources/details_open.png') no-repeat center center;\r\n     cursor: pointer;\r\n }\r\n tr.details td.details-control {\r\n-    background: url('../resources/details_close.png') no-repeat center center;\r\n+    background: url('\"assets/css/bootstrap.min.css\"') no-repeat center center;\r\n }\r\n     </style>\r\n </head>\r\n \t<!-- Main navbar -->\r\n"
                },
                {
                    "date": 1630995938396,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n     background: url('../resources/details_open.png') no-repeat center center;\r\n     cursor: pointer;\r\n }\r\n tr.details td.details-control {\r\n-    background: url('\"assets/css/bootstrap.min.css\"') no-repeat center center;\r\n+    background: url('<?php?>assets/css/bootstrap.min.css') no-repeat center center;\r\n }\r\n     </style>\r\n </head>\r\n \t<!-- Main navbar -->\r\n"
                },
                {
                    "date": 1630995945542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n     background: url('../resources/details_open.png') no-repeat center center;\r\n     cursor: pointer;\r\n }\r\n tr.details td.details-control {\r\n-    background: url('<?php?>assets/css/bootstrap.min.css') no-repeat center center;\r\n+    background: url('<?php echo $url ?>assets/css/bootstrap.min.css') no-repeat center center;\r\n }\r\n     </style>\r\n </head>\r\n \t<!-- Main navbar -->\r\n"
                },
                {
                    "date": 1630995960778,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,13 +27,13 @@\n ?>\r\n <head>\r\n     <style>\r\n         td.details-control {\r\n-    background: url('../resources/details_open.png') no-repeat center center;\r\n+    background: url('<?php echo $url; ?>assets/css/bootstrap.min.css') no-repeat center center;\r\n     cursor: pointer;\r\n }\r\n tr.details td.details-control {\r\n-    background: url('<?php echo $url ?>assets/css/bootstrap.min.css') no-repeat center center;\r\n+    background: url('<?php echo $url; ?>assets/css/bootstrap.min.css') no-repeat center center;\r\n }\r\n     </style>\r\n </head>\r\n \t<!-- Main navbar -->\r\n"
                },
                {
                    "date": 1630995965893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,19 +24,9 @@\n \t}\r\n }\r\n \r\n ?>\r\n-<head>\r\n-    <style>\r\n-        td.details-control {\r\n-    background: url('<?php echo $url; ?>assets/css/bootstrap.min.css') no-repeat center center;\r\n-    cursor: pointer;\r\n-}\r\n-tr.details td.details-control {\r\n-    background: url('<?php echo $url; ?>assets/css/bootstrap.min.css') no-repeat center center;\r\n-}\r\n-    </style>\r\n-</head>\r\n+\r\n \t<!-- Main navbar -->\r\n \t\r\n \t\r\n \t\t<div class=\"content-wrapper\">\r\n"
                },
                {
                    "date": 1630996669356,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -231,38 +231,9 @@\n          ]\r\n       });\r\n    };\r\n \r\n-   var detailRows = [];\r\n \r\n-   $('#datatable_serverside tbody').on( 'click', 'tr td.details-control', function () {\r\n-        var tr = $(this).closest('tr');\r\n-        var row = dt.row( tr );\r\n-        var idx = $.inArray( tr.attr('id'), detailRows );\r\n- \r\n-        if ( row.child.isShown() ) {\r\n-            tr.removeClass( 'details' );\r\n-            row.child.hide();\r\n- \r\n-            // Remove from the 'open' array\r\n-            detailRows.splice( idx, 1 );\r\n-        }\r\n-        else {\r\n-            tr.addClass( 'details' );\r\n-            row.child( format( row.data() ) ).show();\r\n- \r\n-            // Add to the 'open' array\r\n-            if ( idx === -1 ) {\r\n-                detailRows.push( tr.attr('id') );\r\n-            }\r\n-        }\r\n-    } );\r\n-\r\n-    dt.on( 'draw', function () {\r\n-        $.each( detailRows, function ( i, id ) {\r\n-            $('#'+id+' td.details-control').trigger( 'click' );\r\n-        } );\r\n-    } );\r\n    // Reload table\r\n    function success() {\r\n       $('#datatable_serverside').DataTable().ajax.reload(null, false);\r\n    };\r\n"
                }
            ],
            "date": 1630984004146,
            "name": "Commit-0",
            "content": "<?php\r\nrequire_once 'layout/header.php';\r\nrequire_once 'layout/sidebar.php';\r\nrequire_once 'layout/footer.php';\r\n$idsister = $_SESSION['idsister'];\r\n$sqlbranch = \"select lbranch.idbranch, lbranch.branch from location_setup_sister_branch inner join location_branch lbranch on lbranch.idbranch = location_setup_sister_branch.idbranch where location_setup_sister_branch.idsistercompany = '$idsister'\";\r\n$resbranch  = $conn->query($sqlbranch);\r\n$mybranch = array();\r\nif($resbranch -> num_rows>0)\r\n{\r\n\twhile($j = mysqli_fetch_array($resbranch))\r\n\t{\r\n\t\t$mybranch[] = $j;\r\n\t}\r\n}\r\n$sqldivisi = \"select * from divisi\";\r\n$resdivisi = $conn->query($sqldivisi);\r\n$mydivisi = array();\r\nif($resdivisi -> num_rows>0)\r\n{\r\n\twhile($j = mysqli_fetch_array($resdivisi))\r\n\t{\r\n\t\t$mydivisi[] = $j;\r\n\t}\r\n}\r\n\r\n?>\r\n\r\n\t<!-- Main navbar -->\r\n\t\r\n\t\r\n\t\t<div class=\"content-wrapper\">\r\n\t\t\t<div class=\"page-header page-header-light\">\r\n\t\t\t\t<div class=\"page-header-content header-elements-md-inline\">\r\n\t\t\t\t\t<h4><span class=\"font-weight-semibold\">Master Document</span></h4>\r\n\t\t\t\t\t<div class=\"page-title d-flex\">\r\n\t\t\t\t\t\t<div class=\"row\" style=\"width:100%;\">\r\n\t\t\t\t\t\t\t<div class=\"col-xl-12\">\r\n\t\t\t\t\t\t\t<a href=\"#myModal\" data-toggle=\"modal\"><button class=\"btn btn-info\" style=\"background-color:#26a69a !important;width:140px;\"><i\r\n\t\t\t\t\t\t\t\t\t\tclass=\"icon-add\"></i> &nbsp Add Document</button></a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<a href=\"#\" class=\"header-elements-toggle text-default d-md-none\"><i class=\"icon-more\"></i></a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"content\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"col-xl-12\">\r\n\t\t\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t\t<table id = \"datatable_serverside\" class=\"table table-hover table-bordered display nowrap w-100\">\r\n\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th>Code</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Branch</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Division</th>\r\n                                        <th>Department</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Document</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Document Date</th>\r\n\t\t\t\t\t\t\t\t\t\t<th class=\"text-center\">Status</th>\r\n\t\t\t\t\t\t\t\t\t\t<th class=\"text-center\">Action</th>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"modal fade\" id=\"myModal\">\r\n\t\t\t<div class=\"modal-dialog\" role=\"document\">\r\n\t\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t\t<div class=\"modal-header\" style=\"background-color:#324148;color:white;height:60px;\">\r\n\t\t\t\t\t\t<h5 class=\"modal-title\">Add Document</h5>\r\n\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\t\t\t\t\t\t\t<span aria-hidden=\"true\">×</span>\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"modal-body\">\r\n\t\t\t\t\t\t<form id = \"myform\">\r\n\t\t\t\t\t\t<div class=\"form-group\">\r\n                        <label for=\"idsistercompany\">sistercompany</label><input type=\"text\" class = \"form-control\" name=\"idsistercompany\" id=\"idsistercompany\" value = \"<?php echo $_SESSION['namasister'];?>\" disabled />\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"code\">Code</label><input type=\"text\" class = \"form-control\" name=\"code\" id=\"code\" />\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"idbranch\">branch</label>\r\n                        <select class=\"form-control\" id=\"idbranch\">\r\n                                <?php\r\n                                for($i = 0 ; $i < count($mybranch); $i++)\r\n                                {\r\n                                    echo '<option value = \"'.$mybranch[$i]['idbranch'].'\">'.$mybranch[$i]['branch'].'</option>';\r\n                                }\r\n                                ?>\r\n                        </select>\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"iddivisi\">divisi</label>\r\n                        <select class=\"form-control\" id=\"iddivisi\">\r\n                                <?php\r\n                                for($i = 0 ; $i < count($mydivisi); $i++)\r\n                                {\r\n                                    echo '<option value = \"'.$mydivisi[$i]['id'].'\">'.$mydivisi[$i]['divisi'].'</option>';\r\n                                }\r\n                                ?>\r\n                        </select>\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"iddepartement\">departement</label>\r\n                        <select class=\"form-control\" id=\"iddepartment\">\r\n                        </select>\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"name\">Name</label><input type=\"text\" class = \"form-control\" name=\"name\" id=\"name\" />\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"tanggaldokumen\">Tanggaldokumen</label><input type=\"text\" class = \"form-control pickadate\" name=\"tanggaldokumen\" id=\"tanggaldokumen\" />\r\n                        <br class=\"clear\" /> \r\n                       \r\n                        <br class=\"clear\" /> \r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"modal-footer\">\r\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" onclick=\"adddata()\">Save</button>\r\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\" id = \"canceladd\">Cancel</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"modal fade\" id=\"myModaledit\">\r\n\t\t\t<div class=\"modal-dialog\" role=\"document\">\r\n\t\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t\t<div class=\"modal-header\" style=\"background-color:#324148;color:white;height:60px;\">\r\n\t\t\t\t\t\t<h5 class=\"modal-title\">Edit Document</h5>\r\n\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\t\t\t\t\t\t\t<span aria-hidden=\"true\">×</span>\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"modal-body\">\r\n\t\t\t\t\t\t<form id = \"myformedit\">\r\n\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t<input type = \"hidden\" id = \"idchange\">\r\n\t\t\t\t\t\t\t<label for=\"idgroup\">Sister Company</label><input type=\"text\" class = \"form-control\"  value = \"<?php echo $_SESSION['namasister']; ?>\" disabled />\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"code\">Code</label><input type=\"text\" class = \"form-control\" name=\"code\" id=\"codeedit\" />\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"idbranch\">branch</label>\r\n                        <select class=\"form-control\" id=\"idbranchedit\">\r\n                                <?php\r\n                                for($i = 0 ; $i < count($mybranch); $i++)\r\n                                {\r\n                                    echo '<option value = \"'.$mybranch[$i]['idbranch'].'\">'.$mybranch[$i]['branch'].'</option>';\r\n                                }\r\n                                ?>\r\n                        </select>\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"iddivisi\">divisi</label>\r\n                        <select class=\"form-control\" id=\"iddivisiedit\">\r\n                                <?php\r\n                                for($i = 0 ; $i < count($mydivisi); $i++)\r\n                                {\r\n                                    echo '<option value = \"'.$mydivisi[$i]['id'].'\">'.$mydivisi[$i]['divisi'].'</option>';\r\n                                }\r\n                                ?>\r\n                        </select>\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"iddepartement\">departement</label>\r\n                        <select class=\"form-control\" id=\"iddepartmentedit\">\r\n                        </select>\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"name\">Name</label><input type=\"text\" class = \"form-control\" name=\"name\" id=\"nameedit\" />\r\n                        <br class=\"clear\" /> \r\n                        <label for=\"tanggaldokumen\">Tanggaldokumen</label><input type=\"text\" class = \"form-control pickadate\" name=\"tanggaldokumen\" id=\"tanggaldokumenedit\" />\r\n                        <br class=\"clear\" /> \r\n                       \r\n                        <br class=\"clear\" /> \r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"modal-footer\">\r\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" onclick=\"changedata()\">Save</button>\r\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\" id = \"canceledit\">Cancel</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n</body>\r\n</html>\r\n<script src='//cdn.jsdelivr.net/npm/sweetalert2@11'></script>\r\n<script>\r\n$(function() {\r\n      loadData();\r\n      $('#tanggaldokumen').pickadate({\r\n        format: 'yyyy-mm-dd'\r\n      });\r\n      $('#tanggaldokumenedit').pickadate({\r\n        format: 'yyyy-mm-dd'\r\n      });\r\n      \r\n   });\r\n\tfunction loadData() {\r\n      $(\"#datatable_serverside\").DataTable({\r\n         processing: true,\r\n         deferRender: true,\r\n         serverSide: true,\r\n         destroy: true,\r\n         iDisplayInLength: 10,\r\n         scrollX: true,\r\n         order: [[0, 'asc']],\r\n         ajax: { \r\n            url: 'process/masterdocument.php',\r\n            method: 'POST',\r\n            data: { tipe: \"load\"  }\r\n        },\r\n         columns: [\r\n\t\t\t{ name: 'Code', className: 'text-center align-middle' },\r\n            { name: 'Branch', className: 'text-center align-middle' },\r\n            { name: 'Divisi', className: 'text-center align-middle' },\r\n            { name: 'Department', className: 'text-center align-middle' },\r\n\t\t\t{ name: 'Document', className: 'text-center align-middle' },\r\n\t\t\t{ name: 'Date', className: 'text-center align-middle' },\r\n\t\t\t{ name: 'Status', className: 'text-center align-middle' },\r\n            { name: 'Action', searchable: false, orderable: false, className: 'text-center align-middle' }\r\n            \r\n         ]\r\n      });\r\n   };\r\n\r\n   // Reload table\r\n   function success() {\r\n      $('#datatable_serverside').DataTable().ajax.reload(null, false);\r\n   };\r\n\r\n    //setinactive active\r\n  function setstatus(setactionto){\r\n    var elements = setactionto.split(\"-\");\r\n    var myid = elements[0];\r\n    var mystat = elements[1];\r\n    $.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                }\r\n            });\r\n            $.ajax({\r\n                url: \"process/masterdocument.php\",\r\n                method: 'POST',\r\n                data: {\r\n                    tipe: \"setstatus\",\r\n                    myidchange : myid,\r\n                    stat: mystat\r\n                },\r\n                success: function (result) {\r\n                  \r\n                        success();\r\n                        Swal.fire({\r\n                                title: 'Status Changed',\r\n                                text: 'Status Changed Successfully',\r\n                                icon: 'success',\r\n                                confirmButtonColor: '#53d408',\r\n                                allowOutsideClick: false,\r\n                            }).then((result) => {\r\n                                \r\n                            });\r\n                                    \r\n                   \r\n                }\r\n            });\r\n}\r\nvar globaldepartment = \"\";\r\nfunction openmodaledit(element){\r\n   \r\n\r\n    // $row['id'].'-'.$row['idsistercompany'].'-'.$row['idbranch'].'-'.$row['iddivisi'].'-'.$row['iddepartement']\r\n\tvar idelement = element.id.split(\"-\");\r\n\tvar idbranch = idelement[3];\r\n\tvar iddivisi = idelement[4];\r\n\tvar iddepartement = idelement[5];\r\n    globaldepartment = iddepartement;\r\n \r\n    var code = $(\"#code\" + idelement[1]).text();\r\n\tvar tanggaldokumen = $(\"#tanggaldokumen\" + idelement[1]).text();\r\n\tvar name = $(\"#name\" + idelement[1]).text();\r\n    $(\"#codeedit\").val(code);\r\n    $(\"#tanggaldokumenedit\").val(tanggaldokumen);\r\n    $(\"#nameedit\").val(name);\r\n\t$('#idbranchedit option[value='+idbranch+']').prop('selected', true);\r\n\t$('#iddivisiedit option[value='+iddivisi+']').prop('selected', true);\r\n\t$(\"#iddivisiedit\").trigger('change');\r\n\t$(\"#idchange\").val(idelement[1]);\r\n   }\r\n$(\"#group\").on('change', function(){\r\n\t   var myid = this.value;\r\n\t\t$.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                }\r\n            });\r\n            $.ajax({\r\n                url: \"process/masterassets.php\",\r\n                method: 'POST',\r\n                data: {\r\n                    tipe: \"getsubgroup\",\r\n                    idgroup : myid\r\n                    \r\n                },\r\n                success: function (result) {\r\n\t\t\t\t\t// alert(result);\r\n                    if(result == \"none\")\r\n                    {\r\n\t\t\t\t\t\t$(\"#subgroup\").html(\"\");\r\n\t\t\t\t\t\t\r\n                    }\r\n                    else{\r\n                        $(\"#subgroup\").html(result).promise().done(function()\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t});\r\n                    }\r\n                    $(\"#subgroup\").trigger('change');\r\n                  \r\n                  \r\n                }\r\n            });\r\n   }).trigger('change');\r\n   $(\"#subgroup\").on('change', function(){\r\n\t   var myid = this.value;\r\n\t\t$.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                }\r\n            });\r\n            $.ajax({\r\n                url: \"process/masterassets.php\",\r\n                method: 'POST',\r\n                data: {\r\n                    tipe: \"getcategory\",\r\n                    idsubgroup : myid\r\n                    \r\n                },\r\n                success: function (result) {\r\n\t\t\t\t\t// alert(result);\r\n                    if(result == \"none\")\r\n                    {\r\n\t\t\t\t\t\t$(\"#category\").html(\"\");\r\n                    }\r\n                    else{\r\n                        $(\"#category\").html(result).promise().done(function()\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t});\r\n                    }\r\n                }\r\n            });\r\n   }).trigger('change');\r\n   $(\"#groupedit\").on('change', function(){\r\n\t   var myid = this.value;\r\n\t\t$.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                }\r\n            });\r\n            $.ajax({\r\n                url: \"process/masterassets.php\",\r\n                method: 'POST',\r\n                data: {\r\n                    tipe: \"getsubgroup\",\r\n                    idgroup : myid\r\n                    \r\n                },\r\n                success: function (result) {\r\n\t\t\t\t\t// alert(result);\r\n                    if(result == \"none\")\r\n                    {\r\n\t\t\t\t\t\t$(\"#subgroupedit\").html(\"\");\r\n\t\t\t\t\t\t\r\n                    }\r\n                    else{\r\n                        $(\"#subgroupedit\").html(result).promise().done(function()\r\n\t\t\t\t\t\t{\r\n                                if(!globalsubgroup ==\"\")\r\n                                {\r\n                                    // alert(globalid);\r\n                                    $('#subgroupedit').find('option[value=\"'+globalsubgroup+'\"]').prop('selected', true);\r\n                                }\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t});\r\n                    }\r\n                    $(\"#subgroupedit\").trigger('change');\r\n                  \r\n                  \r\n                }\r\n            });\r\n   }).trigger('change');\r\n   $(\"#subgroupedit\").on('change', function(){\r\n\t   var myid = this.value;\r\n\t\t$.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                }\r\n            });\r\n            $.ajax({\r\n                url: \"process/masterassets.php\",\r\n                method: 'POST',\r\n                data: {\r\n                    tipe: \"getcategory\",\r\n                    idsubgroup : myid\r\n                    \r\n                },\r\n                success: function (result) {\r\n\t\t\t\t\t// alert(result);\r\n                    if(result == \"none\")\r\n                    {\r\n\t\t\t\t\t\t$(\"#categoryedit\").html(\"\");\r\n                    }\r\n                    else{\r\n                        $(\"#categoryedit\").html(result).promise().done(function()\r\n\t\t\t\t\t\t{\r\n                            if(!globalcategory ==\"\")\r\n                                {\r\n                                    // alert(globalid);\r\n                                    $('#categoryedit').find('option[value=\"'+globalcategory+'\"]').prop('selected', true);\r\n                                }\r\n\t\t\t\t\t\t\t});\r\n                    }\r\n                }\r\n            });\r\n   }).trigger('change');\r\n\r\n   function adddata(){\r\n\tvar code = $(\"#code\").val();\r\n    var idbranch = $('#idbranch').val();\r\n\tvar iddivisi = $('#iddivisi').val();\r\n\tvar iddepartement = $('#iddepartment').val();\r\n\tvar name = $('#name').val();\r\n\tvar tanggaldokumen = $('#tanggaldokumen').val();\r\n    if(code == \"\" || name == \"\" || tanggaldokumen == \"\" || idbranch == null || iddivisi == null || iddepartement == null)\r\n    {\r\n                         Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Empty Field',\r\n                            text: 'Requirement data cannot be empty',\r\n                            confirmButtonColor: '#e00d0d',\r\n                        });\r\n    }\r\n    else{\r\n        $.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                }\r\n            });\r\n            $.ajax({\r\n                url: \"process/masterdocument.php\",\r\n                method: 'POST',\r\n                data: {\r\n                    tipe: \"add\",\r\n                    code: code,\r\n\t\t\t\t\tidbranch: idbranch,\r\n\t\t\t\t\tiddivisi : iddivisi,\r\n                    iddepartement : iddepartement,\r\n\t\t\t\t\tname : name,\r\n\t\t\t\t\ttanggaldokumen : tanggaldokumen\r\n                    \r\n                },\r\n                success: function (result) {\r\n                //    alert(result);\r\n                     if(result == \"sukses\")\r\n                    {\r\n                        success();\r\n                        Swal.fire({\r\n                                title: 'Data Saved',\r\n                                text: 'Data Inputted Successfully',\r\n                                icon: 'success',\r\n                                confirmButtonColor: '#53d408',\r\n                                allowOutsideClick: false,\r\n                            }).then((result) => {\r\n                                $(\"#myform\").trigger(\"reset\");\r\n                                $(\"#canceladd\").click();\r\n                            });\r\n                    }\r\n                    else{\r\n                        Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Data Exists',\r\n                            text: 'Duplicate Entry For This Document',\r\n                            confirmButtonColor: '#e00d0d',\r\n                        });\r\n                    }\r\n                  \r\n                  \r\n                }\r\n            });\r\n    }\r\n\r\n           \r\n}\r\n\r\nfunction changedata(){\r\n    var changeid = $(\"#idchange\").val();\r\n    var codeedit = $(\"#codeedit\").val();\r\n    var branchedit = $('#idbranchedit').val();\r\n\tvar iddivisiedit = $('#iddivisiedit').val();\r\n\tvar iddepartmentedit = $('#iddepartmentedit').val();\r\n\tvar name = $('#nameedit').val();\r\n\tvar tanggaldokumen = $('#tanggaldokumenedit').val();\r\n    if(codeedit == \"\" || name == \"\" || tanggaldokumen == \"\" || branchedit == null || iddivisiedit == null || iddepartmentedit == null )\r\n    {\r\n                         Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Empty Field',\r\n                            text: 'Requirement data cannot be empty',\r\n                            confirmButtonColor: '#e00d0d',\r\n                        });\r\n    }\r\n\t else{\r\n\t\t$.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                }\r\n            });\r\n            $.ajax({\r\n                url: \"process/masterdocument.php\",\r\n                method: 'POST',\r\n                data: {\r\n\r\n               \r\n                    tipe: \"changedata\",\r\n\t\t\t\t\tmyid : changeid,\r\n                    code: codeedit,\r\n\t\t\t\t\tbranch: branchedit,\r\n\t\t\t\t\tdivisi : iddivisiedit,\r\n                    department : iddepartmentedit,\r\n\t\t\t\t\tname : name,\r\n\t\t\t\t\ttanggal : tanggaldokumen\r\n                    \r\n                },\r\n                success: function (result) {\r\n\t\t\t\t\tif(result == \"sukses\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsuccess();\r\n  \t\t\t\t\t\t\tSwal.fire({\r\n                                title: 'Data Changed',\r\n                                text: 'Data Changed Successfully',\r\n                                icon: 'success',\r\n                                confirmButtonColor: '#53d408',\r\n                                allowOutsideClick: false,\r\n                            }).then((result) => {\r\n                                $(\"#myformedit\").trigger(\"reset\");\r\n                                $(\"#canceledit\").click();\r\n                            });\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tSwal.fire({\r\n                            icon: 'error',\r\n                            title: 'Data Exists',\r\n                            text: 'Duplicate Entry For This Assets',\r\n                            confirmButtonColor: '#e00d0d',\r\n                        });\r\n\t\t\t\t\t}\r\n                 \r\n                   \r\n                  \r\n                  \r\n                }\r\n            });\r\n\t }\r\n   }\r\n\r\n   $(\"#iddivisi\").on('change', function(){\r\n\t   var myid = this.value;\r\n\t\t$.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                }\r\n            });\r\n            $.ajax({\r\n                url: \"process/masterdocument.php\",\r\n                method: 'POST',\r\n                data: {\r\n                    tipe: \"getdepartment\",\r\n                    iddivisi : myid\r\n                    \r\n                },\r\n                success: function (result) {\r\n                    if(result == \"none\")\r\n                    {\r\n\t\t\t\t\t\t$(\"#iddepartment\").html(\"\");\r\n\t\t\t\t\t\t\r\n                    }\r\n                    else{\r\n                        $(\"#iddepartment\").html(result).promise().done(function()\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t});\r\n                    }\r\n                   \r\n                  \r\n                  \r\n                }\r\n            });\r\n   }).trigger('change');\r\n   $(\"#iddivisiedit\").on('change', function(){\r\n\t   var myid = this.value;\r\n\t\t$.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                }\r\n            });\r\n            $.ajax({\r\n                url: \"process/masterdocument.php\",\r\n                method: 'POST',\r\n                data: {\r\n                    tipe: \"getdepartment\",\r\n                    iddivisi : myid\r\n                    \r\n                },\r\n                success: function (result) {\r\n                    if(result == \"none\")\r\n                    {\r\n\t\t\t\t\t\t$(\"#iddepartmentedit\").html(\"\");\r\n\t\t\t\t\t\t\r\n                    }\r\n                    else{\r\n                        $(\"#iddepartmentedit\").html(result).promise().done(function()\r\n\t\t\t\t\t\t{\r\n                          \r\n                                if(!globaldepartment==\"\")\r\n                                {\r\n                                   \r\n                                    $('#iddepartmentedit').find('option[value=\"'+globaldepartment+'\"]').prop('selected', true);\r\n                                }\r\n\t\t\t\t\t\t\t});\r\n                    }\r\n                   \r\n                  \r\n                  \r\n                }\r\n            });\r\n   }).trigger('change');\r\n\r\n   \r\n</script>"
        }
    ]
}